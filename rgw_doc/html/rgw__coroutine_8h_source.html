<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Ceph RADOS Gateway: rgw_coroutine.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ceph RADOS Gateway
   &#160;<span id="projectnumber">54b6c99f8f191958919a1d08a57b4bbad18ba57a</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">rgw_coroutine.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="rgw__coroutine_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef CEPH_RGW_COROUTINE_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define CEPH_RGW_COROUTINE_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#ifdef _ASSERT_H</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define NEED_ASSERT_H</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#pragma push_macro(&quot;_ASSERT_H&quot;)</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;boost/asio.hpp&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#ifdef NEED_ASSERT_H</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#pragma pop_macro(&quot;_ASSERT_H&quot;)</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;include/utime.h&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;common/RefCountedObj.h&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;common/debug.h&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;common/Timer.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;common/admin_socket.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rgw__common_8h.html">rgw_common.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rgw__boost__asio__coroutine_8h.html">rgw_boost_asio_coroutine.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a058c6272d5723f4841023ad537facbc4">   24</a></span>&#160;<span class="preprocessor">#define RGW_ASYNC_OPS_MGR_WINDOW 100</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">class </span><a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">class </span><a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">class </span><a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classRGWCompletionManager.html">   30</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> : <span class="keyword">public</span> RefCountedObject {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  CephContext *cct;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  list&lt;void *&gt; complete_reqs;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  set&lt;RGWAioCompletionNotifier *&gt; cns;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  Mutex lock;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  Cond cond;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  SafeTimer timer;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  atomic_t going_down;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  map&lt;void *, void *&gt; waiters;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keyword">class </span><a class="code" href="classRGWCompletionManager.html#a7851d7b5c4800e76fdceaf8c5dd472f5">WaitContext</a> : <span class="keyword">public</span> Context {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> *manager;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">void</span> *opaque;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="classRGWCompletionManager.html#a7851d7b5c4800e76fdceaf8c5dd472f5">WaitContext</a>(<a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> *_cm, <span class="keywordtype">void</span> *_opaque) : manager(_cm), opaque(_opaque) {}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">void</span> finish(<span class="keywordtype">int</span> r) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      manager-&gt;_wakeup(opaque);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  };</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classRGWCompletionManager.html#a7851d7b5c4800e76fdceaf8c5dd472f5">   54</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRGWCompletionManager.html#a7851d7b5c4800e76fdceaf8c5dd472f5">WaitContext</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#a661b4a69c88d785b9297c971f753e09d">_wakeup</a>(<span class="keywordtype">void</span> *opaque);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#acba6f34f17ec614e1a66c99679fc33ff">_complete</a>(<a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> *cn, <span class="keywordtype">void</span> *user_info);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classRGWCompletionManager.html#ae560d2a4440d71b535db535bbbdc137b">RGWCompletionManager</a>(CephContext *_cct);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classRGWCompletionManager.html#a434c1dd113cc15842366177327d5ae2f">~RGWCompletionManager</a>();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#ad790b8c89d28650509fe620e9e2431a4">complete</a>(<a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> *cn, <span class="keywordtype">void</span> *user_info);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCompletionManager.html#ae9aab4ebe058b165e3c28ed9b02bf8e7">get_next</a>(<span class="keywordtype">void</span> **user_info);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCompletionManager.html#a855e043e1f828b5c9e3179a813dca47a">try_get_next</a>(<span class="keywordtype">void</span> **user_info);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#a567c3bbc385fd621abbe4c1e5599eab0">go_down</a>();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">   * wait for interval length to complete user_info</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#a89e7aefd9d2cc54667d70d739e427681">wait_interval</a>(<span class="keywordtype">void</span> *opaque, <span class="keyword">const</span> utime_t&amp; interval, <span class="keywordtype">void</span> *user_info);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#a0188c3d4cd63305a36ff1f6705d25afc">wakeup</a>(<span class="keywordtype">void</span> *opaque);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#afc57bd8b515426a44de9cc7ce3109a6d">register_completion_notifier</a>(<a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> *cn);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCompletionManager.html#a59000341974b441e5d2bbd0989f5d185">unregister_completion_notifier</a>(<a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> *cn);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;};</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/* a single use librados aio completion notifier that hooks into the RGWCompletionManager */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classRGWAioCompletionNotifier.html">   80</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> : <span class="keyword">public</span> RefCountedObject {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  librados::AioCompletion *c;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> *completion_mgr;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordtype">void</span> *user_data;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  Mutex lock;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">bool</span> registered;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classRGWAioCompletionNotifier.html#a9de85c4c8653ba710d7b4a4b38ddc410">RGWAioCompletionNotifier</a>(<a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> *_mgr, <span class="keywordtype">void</span> *_user_data);</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classRGWAioCompletionNotifier.html#aad441170397f545c9cc28f8e9a9a0ed0">   89</a></span>&#160;  <a class="code" href="classRGWAioCompletionNotifier.html#aad441170397f545c9cc28f8e9a9a0ed0">~RGWAioCompletionNotifier</a>() {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    c-&gt;release();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    lock.Lock();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">bool</span> need_unregister = registered;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (registered) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      completion_mgr-&gt;get();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    registered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    lock.Unlock();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (need_unregister) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      completion_mgr-&gt;<a class="code" href="classRGWCompletionManager.html#a59000341974b441e5d2bbd0989f5d185">unregister_completion_notifier</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      completion_mgr-&gt;put();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classRGWAioCompletionNotifier.html#a1a2d61cbb82a744888f021defa9aed23">  104</a></span>&#160;  librados::AioCompletion *<a class="code" href="classRGWAioCompletionNotifier.html#a1a2d61cbb82a744888f021defa9aed23">completion</a>() {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> c;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classRGWAioCompletionNotifier.html#aef3017f3ee006020816918c7e565db55">  108</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWAioCompletionNotifier.html#aef3017f3ee006020816918c7e565db55">unregister</a>() {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    Mutex::Locker l(lock);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (!registered) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    registered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classRGWAioCompletionNotifier.html#aa5ac53fb2175d0c415f26438cbbf4846">  116</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWAioCompletionNotifier.html#aa5ac53fb2175d0c415f26438cbbf4846">cb</a>() {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    lock.Lock();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (!registered) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      lock.Unlock();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      put();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    completion_mgr-&gt;get();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    registered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    lock.Unlock();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    completion_mgr-&gt;<a class="code" href="classRGWCompletionManager.html#ad790b8c89d28650509fe620e9e2431a4">complete</a>(<span class="keyword">this</span>, user_data);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    completion_mgr-&gt;put();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    put();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;};</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="structRGWCoroutinesEnv.html">  132</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structRGWCoroutinesEnv.html">RGWCoroutinesEnv</a> {</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="structRGWCoroutinesEnv.html#a60ca8ad04bb6860500068061d4ed35b1">  133</a></span>&#160;  uint64_t <a class="code" href="structRGWCoroutinesEnv.html#a60ca8ad04bb6860500068061d4ed35b1">run_context</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="structRGWCoroutinesEnv.html#affc6c59fd01626fa83b21e2d529008ac">  134</a></span>&#160;  <a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a> *<a class="code" href="structRGWCoroutinesEnv.html#affc6c59fd01626fa83b21e2d529008ac">manager</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="structRGWCoroutinesEnv.html#a781a2cc8d3e9e2fd85cf24fc3dae6887">  135</a></span>&#160;  list&lt;RGWCoroutinesStack *&gt; *<a class="code" href="structRGWCoroutinesEnv.html#a781a2cc8d3e9e2fd85cf24fc3dae6887">scheduled_stacks</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="structRGWCoroutinesEnv.html#a783f3f3565fc809334c9eb65d7d6319c">  136</a></span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="structRGWCoroutinesEnv.html#a783f3f3565fc809334c9eb65d7d6319c">stack</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="structRGWCoroutinesEnv.html#a6bfd0e774a21bd39deea625dd95b403d">  138</a></span>&#160;  <a class="code" href="structRGWCoroutinesEnv.html#a6bfd0e774a21bd39deea625dd95b403d">RGWCoroutinesEnv</a>() : <a class="code" href="structRGWCoroutinesEnv.html#a60ca8ad04bb6860500068061d4ed35b1">run_context</a>(0), <a class="code" href="structRGWCoroutinesEnv.html#affc6c59fd01626fa83b21e2d529008ac">manager</a>(NULL), <a class="code" href="structRGWCoroutinesEnv.html#a781a2cc8d3e9e2fd85cf24fc3dae6887">scheduled_stacks</a>(NULL), <a class="code" href="structRGWCoroutinesEnv.html#a783f3f3565fc809334c9eb65d7d6319c">stack</a>(NULL) {}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;};</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05c">  141</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05c">RGWCoroutineState</a> {</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca46e02efb14837700c9616f415dea2b74">  142</a></span>&#160;  <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca46e02efb14837700c9616f415dea2b74">RGWCoroutine_Error</a> = -2,</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca55132380a33f7059892e175d40bbb528">  143</a></span>&#160;  <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca55132380a33f7059892e175d40bbb528">RGWCoroutine_Done</a>  = -1,</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05cad7a3441f1fe26da8bb46bef0757a30ad">  144</a></span>&#160;  <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05cad7a3441f1fe26da8bb46bef0757a30ad">RGWCoroutine_Run</a>   =  0,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;};</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="structrgw__spawned__stacks.html">  147</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structrgw__spawned__stacks.html">rgw_spawned_stacks</a> {</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">  148</a></span>&#160;  vector&lt;RGWCoroutinesStack *&gt; <a class="code" href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">entries</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="structrgw__spawned__stacks.html#a60d3f2642c153f16c426d17a681a01c9">  150</a></span>&#160;  <a class="code" href="structrgw__spawned__stacks.html#a60d3f2642c153f16c426d17a681a01c9">rgw_spawned_stacks</a>() {}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structrgw__spawned__stacks.html#af154e6f89ba344fa2e10fbb1818a2609">  152</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structrgw__spawned__stacks.html#af154e6f89ba344fa2e10fbb1818a2609">add_pending</a>(<a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *s) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">entries</a>.push_back(s);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structrgw__spawned__stacks.html#a1ca98b066c470995db462f9afc8a83ef">  156</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structrgw__spawned__stacks.html#a1ca98b066c470995db462f9afc8a83ef">inherit</a>(<a class="code" href="structrgw__spawned__stacks.html">rgw_spawned_stacks</a> *source) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">for</span> (vector&lt;RGWCoroutinesStack *&gt;::iterator iter = source-&gt;<a class="code" href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">entries</a>.begin();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         iter != source-&gt;<a class="code" href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">entries</a>.end(); ++iter) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="structrgw__spawned__stacks.html#af154e6f89ba344fa2e10fbb1818a2609">add_pending</a>(*iter);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    source-&gt;<a class="code" href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">entries</a>.clear();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;};</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html">  167</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> : <span class="keyword">public</span> RefCountedObject, <span class="keyword">public</span> <a class="code" href="classboost_1_1asio_1_1coroutine.html">boost::asio::coroutine</a> {</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a9866428bd4838c94fba8566e37509011">  168</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keyword">struct </span>StatusItem {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    utime_t timestamp;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">string</span> status;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    StatusItem(utime_t&amp; t, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; s) : timestamp(t), status(s) {}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#adf2bb70ac98abcc1b15d1167ddaebb52">dump</a>(Formatter *f) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  };</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a6e9b7fcf87e329632ed41d0765024315">  179</a></span>&#160;<span class="preprocessor">#define MAX_COROUTINE_HISTORY 10</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keyword">struct </span>Status {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    CephContext *<a class="code" href="classRGWCoroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    RWLock lock;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">int</span> max_history;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    utime_t timestamp;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    stringstream status;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    Status(CephContext *_cct) : <a class="code" href="classRGWCoroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>(_cct), lock(<span class="stringliteral">&quot;RGWCoroutine::Status::lock&quot;</span>), max_history(<a class="code" href="rgw__coroutine_8h.html#a6e9b7fcf87e329632ed41d0765024315">MAX_COROUTINE_HISTORY</a>) {}</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    deque&lt;StatusItem&gt; history;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    stringstream&amp; <a class="code" href="classRGWCoroutine.html#a58803b75f76ad836937fcdfd833cdc62">set_status</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  } status;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  stringstream description;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#aca68a280dc4db676ddab29dcab3c795f">  199</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#aca68a280dc4db676ddab29dcab3c795f">_yield_ret</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#ac542bbbaf292dad7e659e0a2dff59465">  200</a></span>&#160;  <a class="code" href="classboost_1_1asio_1_1coroutine.html">boost::asio::coroutine</a> <a class="code" href="classRGWCoroutine.html#ac542bbbaf292dad7e659e0a2dff59465">drain_cr</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a887e803a293aff88fd8d60003a73e50a">  202</a></span>&#160;  CephContext *<a class="code" href="classRGWCoroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a1beb8ca86f8399dadec929a74c7d73f5">  204</a></span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="classRGWCoroutine.html#a1beb8ca86f8399dadec929a74c7d73f5">stack</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#afe652dd81659a23225be50fb0a4a7edb">  205</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">  206</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a620d434a11f6184045ad000d33dbd477">  208</a></span>&#160;  <a class="code" href="structrgw__spawned__stacks.html">rgw_spawned_stacks</a> <a class="code" href="classRGWCoroutine.html#a620d434a11f6184045ad000d33dbd477">spawned</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a6fbe6e26b4d94762f94914d000623e6e">  210</a></span>&#160;  stringstream <a class="code" href="classRGWCoroutine.html#a6fbe6e26b4d94762f94914d000623e6e">error_stream</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#af1d7a6ff09f7d4ad4a09daebdfb364f2">  212</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#af1d7a6ff09f7d4ad4a09daebdfb364f2">set_state</a>(<span class="keywordtype">int</span> s, <span class="keywordtype">int</span> ret = 0) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a> = s;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a576a8ced300f52809ad477f0082e3bcd">  216</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<span class="keywordtype">int</span> ret) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a> = <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca46e02efb14837700c9616f415dea2b74">RGWCoroutine_Error</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a15bce10b8fbd959412a9473b03f0dd82">  220</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>() {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a> = <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca55132380a33f7059892e175d40bbb528">RGWCoroutine_Done</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#a83c79463d59e40ac18fb8c9ef7225d45">set_io_blocked</a>(<span class="keywordtype">bool</span> flag);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#a825d8e583ebcaeeb590dcdd160e200cd">io_block</a>(<span class="keywordtype">int</span> ret = 0);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#ab6eddf210fee38da950bc8189abe1c75">  227</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#ab6eddf210fee38da950bc8189abe1c75">reset_description</a>() {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    description.str(<span class="keywordtype">string</span>());</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a08295386b658198679ac3c52b0f65eb1">  231</a></span>&#160;  stringstream&amp; <a class="code" href="classRGWCoroutine.html#a08295386b658198679ac3c52b0f65eb1">set_description</a>() {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> description;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a58803b75f76ad836937fcdfd833cdc62">  234</a></span>&#160;  stringstream&amp; <a class="code" href="classRGWCoroutine.html#a58803b75f76ad836937fcdfd833cdc62">set_status</a>() {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> status.set_status();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a6389d99ed7c42126a5d7713de8cc77cb">  238</a></span>&#160;  stringstream&amp; <a class="code" href="classRGWCoroutine.html#a6389d99ed7c42126a5d7713de8cc77cb">set_status</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; s) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    stringstream&amp; status = <a class="code" href="classRGWCoroutine.html#a58803b75f76ad836937fcdfd833cdc62">set_status</a>();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    status &lt;&lt; s;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a2ff2ed16723b2c1ae7b661ad0d68e0e7">  245</a></span>&#160;  <a class="code" href="classRGWCoroutine.html#a2ff2ed16723b2c1ae7b661ad0d68e0e7">RGWCoroutine</a>(CephContext *_cct) : status(_cct), <a class="code" href="classRGWCoroutine.html#aca68a280dc4db676ddab29dcab3c795f">_yield_ret</a>(false), <a class="code" href="classRGWCoroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>(_cct), <a class="code" href="classRGWCoroutine.html#a1beb8ca86f8399dadec929a74c7d73f5">stack</a>(NULL), <a class="code" href="classRGWCoroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>(0), <a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a>(<a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05cad7a3441f1fe26da8bb46bef0757a30ad">RGWCoroutine_Run</a>) {}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classRGWCoroutine.html#a1c141b032b12adc327bbf8405fa19b12">~RGWCoroutine</a>();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#ac468bb512c9a403347cd0f2a2edb80ab">operate</a>() = 0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a448c57de2331dfe757400bc0187ee5b5">  250</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#a448c57de2331dfe757400bc0187ee5b5">is_done</a>() { <span class="keywordflow">return</span> (<a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a> == <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca55132380a33f7059892e175d40bbb528">RGWCoroutine_Done</a> || <a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a> == <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca46e02efb14837700c9616f415dea2b74">RGWCoroutine_Error</a>); }</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#abd415f885a4f8df3131b17aba1f913df">  251</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#abd415f885a4f8df3131b17aba1f913df">is_error</a>() { <span class="keywordflow">return</span> (<a class="code" href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">state</a> == <a class="code" href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca46e02efb14837700c9616f415dea2b74">RGWCoroutine_Error</a>); }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#aa3f6d43393d0f9d900c0f6c98cf5c933">  253</a></span>&#160;  stringstream&amp; <a class="code" href="classRGWCoroutine.html#aa3f6d43393d0f9d900c0f6c98cf5c933">log_error</a>() { <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutine.html#a6fbe6e26b4d94762f94914d000623e6e">error_stream</a>; }</div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a5d54e08eb2f503c19b32bc3797705da0">  254</a></span>&#160;  <span class="keywordtype">string</span> <a class="code" href="classRGWCoroutine.html#a5d54e08eb2f503c19b32bc3797705da0">error_str</a>() {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutine.html#a6fbe6e26b4d94762f94914d000623e6e">error_stream</a>.str();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a71a3278d2998c966e8a08021ed4a3936">  258</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#a71a3278d2998c966e8a08021ed4a3936">set_retcode</a>(<span class="keywordtype">int</span> r) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="classRGWCoroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> = r;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#ae7f14e8deb5ddd43baacfc507dd5105c">  262</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#ae7f14e8deb5ddd43baacfc507dd5105c">get_ret_status</a>() {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *op); <span class="comment">/* call at the same stack we&#39;re in */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="classRGWCoroutine.html#a1ef9eb58401aeb5626538e29fce21b12">spawn</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *op, <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#a40be538603f51023e908365ea1de154d">wait</a>); <span class="comment">/* execute on a different stack */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#a7c10c5fed7ea19cda4e6a186ff73bb64">collect</a>(<span class="keywordtype">int</span> *ret); <span class="comment">/* returns true if needs to be called again */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#ab56b9f427d29b1db4b43ccc398ad5e46">collect_next</a>(<span class="keywordtype">int</span> *ret, <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> **collected_stack = NULL); <span class="comment">/* returns true if found a stack to collect */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutine.html#a40be538603f51023e908365ea1de154d">wait</a>(<span class="keyword">const</span> utime_t&amp; interval);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#aa503273b557aeefa9bcd9ff915112a4d">drain_children</a>(<span class="keywordtype">int</span> num_cr_left); <span class="comment">/* returns true if needed to be called again */</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#a84b7f58440787faf61271a85bdebd762">wakeup</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#aab2ada61e785db0e4d6f50f56825fdf8">set_sleeping</a>(<span class="keywordtype">bool</span> flag); <span class="comment">/* put in sleep, or wakeup from sleep */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#ae11717a48b06dde1b69a00cfe62a404a">  276</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classRGWCoroutine.html#ae11717a48b06dde1b69a00cfe62a404a">num_spawned</a>() {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutine.html#a620d434a11f6184045ad000d33dbd477">spawned</a>.<a class="code" href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">entries</a>.size();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#ad48b9b53581da917a52d0acdfd264b3a">wait_for_child</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classRGWCoroutine.html#af30a274e4f36b6371b91da8ea873edc5">to_str</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classRGWCoroutine.html#a55b37a2ed8e649ae75457f5e53c565e3">  284</a></span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="classRGWCoroutine.html#a55b37a2ed8e649ae75457f5e53c565e3">get_stack</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutine.html#a1beb8ca86f8399dadec929a74c7d73f5">stack</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutine.html#adf2bb70ac98abcc1b15d1167ddaebb52">dump</a>(Formatter *f) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;};</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;ostream&amp; <a class="code" href="rgw__coroutine_8h.html#a0ed1683d636f1aff37722fb792951757">operator&lt;&lt;</a>(ostream&amp; out, <span class="keyword">const</span> <a class="code" href="classRGWCoroutine.html">RGWCoroutine</a>&amp; cr);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a821b7042a023ee8d79b3a50276b48857">  293</a></span>&#160;<span class="preprocessor">#define yield_until_true(x)     \</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">do {                            \</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="preprocessor">  do {                          \</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">    yield _yield_ret = x;       \</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">  } while (!_yield_ret);        \</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">  _yield_ret = false;           \</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">} while (0)</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#aa25983a1d9c726553f1e836b44aab0d6">  301</a></span>&#160;<span class="preprocessor">#define drain_all() \</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">  drain_cr = boost::asio::coroutine(); \</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">  yield_until_true(drain_children(0))</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="rgw__coroutine_8h.html#a296d5e85c89644672229c749654fe8a0">  305</a></span>&#160;<span class="preprocessor">#define drain_all_but(n) \</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">  drain_cr = boost::asio::coroutine(); \</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">  yield_until_true(drain_children(n))</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="classRGWConsumerCR.html">  310</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWConsumerCR.html">RGWConsumerCR</a> : <span class="keyword">public</span> <a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  list&lt;T&gt; product;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classRGWConsumerCR.html#a62fd935cc8aa0b7b78a3cf014aae6862">  314</a></span>&#160;  <a class="code" href="classRGWConsumerCR.html#a62fd935cc8aa0b7b78a3cf014aae6862">RGWConsumerCR</a>(CephContext *_cct) : <a class="code" href="classRGWCoroutine.html">RGWCoroutine</a>(_cct) {}</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classRGWConsumerCR.html#ac676046b1443a24d577e75b7f269ecc0">  316</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWConsumerCR.html#ac676046b1443a24d577e75b7f269ecc0">has_product</a>() {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> !product.empty();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="classRGWConsumerCR.html#ad510c5cfab6a3176b44fa74e218f679d">  320</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWConsumerCR.html#ad510c5cfab6a3176b44fa74e218f679d">wait_for_product</a>() {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classRGWConsumerCR.html#ac676046b1443a24d577e75b7f269ecc0">has_product</a>()) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="classRGWCoroutine.html#aab2ada61e785db0e4d6f50f56825fdf8">set_sleeping</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classRGWConsumerCR.html#af2a8274c488da0fe20220bba013f851c">  326</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWConsumerCR.html#af2a8274c488da0fe20220bba013f851c">consume</a>(T *p) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (product.empty()) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    *p = product.front();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    product.pop_front();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWConsumerCR.html#af1a1c0eef119a4fe2fcbd458e6495ac9">receive</a>(<span class="keyword">const</span> T&amp; p, <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#a84b7f58440787faf61271a85bdebd762">wakeup</a> = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWConsumerCR.html#af1a1c0eef119a4fe2fcbd458e6495ac9">receive</a>(list&lt;T&gt;&amp; l, <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutine.html#a84b7f58440787faf61271a85bdebd762">wakeup</a> = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;};</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html">  339</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> : <span class="keyword">public</span> RefCountedObject {</div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#acb7a2d75843ef6bc378be053e7a256e6">  340</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRGWCoroutine.html">RGWCoroutine</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a368450dbe129f58bf5dbf85e50d42748">  341</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  CephContext *cct;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a> *ops_mgr;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  list&lt;RGWCoroutine *&gt; ops;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  list&lt;RGWCoroutine *&gt;::iterator pos;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="structrgw__spawned__stacks.html">rgw_spawned_stacks</a> spawned;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  set&lt;RGWCoroutinesStack *&gt; blocked_by_stack;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  set&lt;RGWCoroutinesStack *&gt; blocking_stacks;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordtype">bool</span> done_flag;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">bool</span> error_flag;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordtype">bool</span> blocked_flag;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordtype">bool</span> sleep_flag;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordtype">bool</span> interval_wait_flag;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordtype">bool</span> is_scheduled;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordtype">bool</span> is_waiting_for_child;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordtype">int</span> retcode;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  uint64_t run_count;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a335bd803bea2adc6e7afd9526165dffb">  370</a></span>&#160;  <a class="code" href="structRGWCoroutinesEnv.html">RGWCoroutinesEnv</a> *<a class="code" href="classRGWCoroutinesStack.html#a335bd803bea2adc6e7afd9526165dffb">env</a>;</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a461f809c07927297ec142915e231e83f">  371</a></span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="classRGWCoroutinesStack.html#a461f809c07927297ec142915e231e83f">parent</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="classRGWCoroutinesStack.html#a1b8d4cd2e4230ce25eded5304ea890ed">spawn</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *source_op, <a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *next_op, <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a9b45e7e27802942992b448a25eb783ce">wait</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a84d835d7b3c126047404e2da7e65a4a3">collect</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *op, <span class="keywordtype">int</span> *ret); <span class="comment">/* returns true if needs to be called again */</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#af323e3cf0f4f71a249844d5e70e7b207">collect_next</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *op, <span class="keywordtype">int</span> *ret, <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> **collected_stack); <span class="comment">/* returns true if found a stack to collect */</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classRGWCoroutinesStack.html#a3094a828a86f995c0b9eca8d4ecfd247">RGWCoroutinesStack</a>(CephContext *_cct, <a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a> *_ops_mgr, <a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *start = NULL);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="classRGWCoroutinesStack.html#adbbf91c80e812d9d420957fcb67093f6">~RGWCoroutinesStack</a>();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesStack.html#a67d9f040f385d92212868f8d407f7964">operate</a>(<a class="code" href="structRGWCoroutinesEnv.html">RGWCoroutinesEnv</a> *<a class="code" href="classRGWCoroutinesStack.html#a335bd803bea2adc6e7afd9526165dffb">env</a>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a8f6cfcedbf3aaef35abd2c07f06b5c6b">  382</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a8f6cfcedbf3aaef35abd2c07f06b5c6b">is_done</a>() {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> done_flag;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a29976073e4a97a6bef039a63f016fc34">  385</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a29976073e4a97a6bef039a63f016fc34">is_error</a>() {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">return</span> error_flag;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a9518084cb4e767e1a14ea154cbcd1d5f">  388</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a9518084cb4e767e1a14ea154cbcd1d5f">is_blocked_by_stack</a>() {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> !blocked_by_stack.empty();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  }</div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a6d4c9bd8b3561a9483937a72d6c9c642">  391</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#a6d4c9bd8b3561a9483937a72d6c9c642">set_io_blocked</a>(<span class="keywordtype">bool</span> flag) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    blocked_flag = flag;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a8878b0ba830f2dabd27e425a94d9e062">  394</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a8878b0ba830f2dabd27e425a94d9e062">is_io_blocked</a>() {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> blocked_flag;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#ad2c03a7755c8fcfb60e6f28cb0ee5801">  397</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#ad2c03a7755c8fcfb60e6f28cb0ee5801">set_interval_wait</a>(<span class="keywordtype">bool</span> flag) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    interval_wait_flag = flag;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#aa4fc840435aed02e3ab5bef6d2fd47cf">  400</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#aa4fc840435aed02e3ab5bef6d2fd47cf">is_interval_waiting</a>() {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> interval_wait_flag;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#ad53a1f6649145a553136a4b1ea00474f">  403</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#ad53a1f6649145a553136a4b1ea00474f">set_sleeping</a>(<span class="keywordtype">bool</span> flag) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a21eb693c02c12e9699a181be7c083b5a">wakeup</a> = sleep_flag &amp; !flag;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    sleep_flag = flag;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (wakeup) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <a class="code" href="classRGWCoroutinesStack.html#a71808034a6a58e12d161a0613db2c98b">schedule</a>();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#aa736b8ebc7328026de3af0ac587c52a9">  410</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#aa736b8ebc7328026de3af0ac587c52a9">is_sleeping</a>() {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> sleep_flag;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div>
<div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#aadfafd9d227e33cdf2d197c85a2f54f4">  413</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#aadfafd9d227e33cdf2d197c85a2f54f4">set_is_scheduled</a>(<span class="keywordtype">bool</span> flag) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    is_scheduled = flag;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#aed576506ac349a8f63d2a5f7eff59f8e">  417</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#aed576506ac349a8f63d2a5f7eff59f8e">is_blocked</a>() {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutinesStack.html#a9518084cb4e767e1a14ea154cbcd1d5f">is_blocked_by_stack</a>() || <a class="code" href="classRGWCoroutinesStack.html#aa736b8ebc7328026de3af0ac587c52a9">is_sleeping</a>() ||</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          <a class="code" href="classRGWCoroutinesStack.html#a8878b0ba830f2dabd27e425a94d9e062">is_io_blocked</a>() || <a class="code" href="classRGWCoroutinesStack.html#a735600b27c725dd3b1b46cb79b308819">waiting_for_child</a>() ;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a71808034a6a58e12d161a0613db2c98b">  422</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#a71808034a6a58e12d161a0613db2c98b">schedule</a>(list&lt;RGWCoroutinesStack *&gt; *stacks = NULL) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span> (!stacks) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      stacks = <a class="code" href="classRGWCoroutinesStack.html#a335bd803bea2adc6e7afd9526165dffb">env</a>-&gt;<a class="code" href="structRGWCoroutinesEnv.html#a781a2cc8d3e9e2fd85cf24fc3dae6887">scheduled_stacks</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (!is_scheduled) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      stacks-&gt;push_back(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      is_scheduled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a7311131421c69db4f7cf4bce6ee3efc9">  432</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesStack.html#a7311131421c69db4f7cf4bce6ee3efc9">get_ret_status</a>() {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> retcode;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordtype">string</span> <a class="code" href="classRGWCoroutinesStack.html#a4916534f526fe3558149f08eef7b744f">error_str</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#a40a608f273bda7721fe582ce5d75a48f">call</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *next_op);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="classRGWCoroutinesStack.html#a1b8d4cd2e4230ce25eded5304ea890ed">spawn</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *next_op, <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a9b45e7e27802942992b448a25eb783ce">wait</a>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesStack.html#a43023dae081b3939287bf5564f3904dd">unwind</a>(<span class="keywordtype">int</span> retcode);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesStack.html#a9b45e7e27802942992b448a25eb783ce">wait</a>(<span class="keyword">const</span> utime_t&amp; interval);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#a21eb693c02c12e9699a181be7c083b5a">wakeup</a>();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a84d835d7b3c126047404e2da7e65a4a3">collect</a>(<span class="keywordtype">int</span> *ret); <span class="comment">/* returns true if needs to be called again */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> *<a class="code" href="classRGWCoroutinesStack.html#aaac10c7f446cc39c9968e93b604baeaf">create_completion_notifier</a>();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> *<a class="code" href="classRGWCoroutinesStack.html#a5f5f4cdbd776023f66c772334fd134bb">get_completion_mgr</a>();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#abb2376246509c51b909b66c00bfba7bd">  450</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#abb2376246509c51b909b66c00bfba7bd">set_blocked_by</a>(<a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *s) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    blocked_by_stack.insert(s);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    s-&gt;blocking_stacks.insert(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a8b2ef308a7c14fefa85f7cc36d096ac2">  455</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#a8b2ef308a7c14fefa85f7cc36d096ac2">set_wait_for_child</a>(<span class="keywordtype">bool</span> flag) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    is_waiting_for_child = flag;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a735600b27c725dd3b1b46cb79b308819">  459</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a735600b27c725dd3b1b46cb79b308819">waiting_for_child</a>() {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> is_waiting_for_child;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesStack.html#a7e3d91470778fd3ba4575845412308be">unblock_stack</a>(<a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> **s);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="classRGWCoroutinesStack.html#a1bd3482cd6cb6207120457879aedf467">  465</a></span>&#160;  <a class="code" href="structRGWCoroutinesEnv.html">RGWCoroutinesEnv</a> *<a class="code" href="classRGWCoroutinesStack.html#a1bd3482cd6cb6207120457879aedf467">get_env</a>() { <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutinesStack.html#a335bd803bea2adc6e7afd9526165dffb">env</a>; }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesStack.html#a2b37dcc173fa359303d6d1e1d03cf093">dump</a>(Formatter *f) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;};</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="classRGWConsumerCR.html#a29f6df136b9a3cbda0d88acf0299d0e0">  471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRGWConsumerCR.html#af1a1c0eef119a4fe2fcbd458e6495ac9">RGWConsumerCR&lt;T&gt;::receive</a>(list&lt;T&gt;&amp; l, <span class="keywordtype">bool</span> wakeup)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  product.splice(product.end(), l);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">if</span> (wakeup) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    set_sleeping(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="classRGWConsumerCR.html#af1a1c0eef119a4fe2fcbd458e6495ac9">  481</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRGWConsumerCR.html#af1a1c0eef119a4fe2fcbd458e6495ac9">RGWConsumerCR&lt;T&gt;::receive</a>(<span class="keyword">const</span> T&amp; p, <span class="keywordtype">bool</span> wakeup)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  product.push_back(p);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (wakeup) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    set_sleeping(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManagerRegistry.html">  489</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWCoroutinesManagerRegistry.html">RGWCoroutinesManagerRegistry</a> : <span class="keyword">public</span> RefCountedObject, <span class="keyword">public</span> AdminSocketHook {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  CephContext *cct;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  set&lt;RGWCoroutinesManager *&gt; managers;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  RWLock lock;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordtype">string</span> admin_command;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManagerRegistry.html#a159c3d52c1000133df46cb7fbcb1072d">  498</a></span>&#160;  <a class="code" href="classRGWCoroutinesManagerRegistry.html#a159c3d52c1000133df46cb7fbcb1072d">RGWCoroutinesManagerRegistry</a>(CephContext *_cct) : cct(_cct), lock(<span class="stringliteral">&quot;RGWCoroutinesRegistry::lock&quot;</span>) {}</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="classRGWCoroutinesManagerRegistry.html#aed2e3d4f28aad2e6df089fcc84ee0af6">~RGWCoroutinesManagerRegistry</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesManagerRegistry.html#a7a238640a16058287ef91c5788beceaa">add</a>(<a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a> *mgr);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordtype">void</span> <span class="keyword">remove</span>(<a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a> *mgr);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesManagerRegistry.html#ae471074f0dc47343055e16ce8fbd8762">hook_to_admin_command</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; command);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRGWCoroutinesManagerRegistry.html#a976530aed79e9b03aeb7cdeddb79aba0">call</a>(std::string command, cmdmap_t&amp; cmdmap, std::string format,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        bufferlist&amp; out);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesManagerRegistry.html#a53ec13d09a26119cafe4060b4703fe7d">dump</a>(Formatter *f) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;};</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html">  511</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a> {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  CephContext *cct;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  atomic_t going_down;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  atomic64_t run_context_count;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  map&lt;uint64_t, set&lt;RGWCoroutinesStack *&gt; &gt; run_contexts;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  RWLock lock;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordtype">void</span> handle_unblocked_stack(set&lt;RGWCoroutinesStack *&gt;&amp; context_stacks, list&lt;RGWCoroutinesStack *&gt;&amp; scheduled_stacks, <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *stack, <span class="keywordtype">int</span> *waiting_count);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#a9e364706fc5260610c3a6bdb474ed20c">  522</a></span>&#160;  <a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> *<a class="code" href="classRGWCoroutinesManager.html#a9e364706fc5260610c3a6bdb474ed20c">completion_mgr</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">  523</a></span>&#160;  <a class="code" href="classRGWCoroutinesManagerRegistry.html">RGWCoroutinesManagerRegistry</a> *<a class="code" href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">cr_registry</a>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#a08e0a83139f78c7b5ec53858726ae646">  525</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesManager.html#a08e0a83139f78c7b5ec53858726ae646">ops_window</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#a69abd26d5caf6d7272082e03bd60e406">  527</a></span>&#160;  <span class="keywordtype">string</span> <a class="code" href="classRGWCoroutinesManager.html#a69abd26d5caf6d7272082e03bd60e406">id</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesManager.html#a6b63c2c4559ca88d3de7f6078e1bc4dd">put_completion_notifier</a>(<a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> *cn);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#a09eeaf1bba708bb4c628c28d7c9100ca">  531</a></span>&#160;  <a class="code" href="classRGWCoroutinesManager.html#a09eeaf1bba708bb4c628c28d7c9100ca">RGWCoroutinesManager</a>(CephContext *_cct, <a class="code" href="classRGWCoroutinesManagerRegistry.html">RGWCoroutinesManagerRegistry</a> *_cr_registry) : cct(_cct), lock(<span class="stringliteral">&quot;RGWCoroutinesManager::lock&quot;</span>),</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                                                                        <a class="code" href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">cr_registry</a>(_cr_registry), <a class="code" href="classRGWCoroutinesManager.html#a08e0a83139f78c7b5ec53858726ae646">ops_window</a>(<a class="code" href="rgw__coroutine_8h.html#a058c6272d5723f4841023ad537facbc4">RGW_ASYNC_OPS_MGR_WINDOW</a>) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="classRGWCoroutinesManager.html#a9e364706fc5260610c3a6bdb474ed20c">completion_mgr</a> = <span class="keyword">new</span> <a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a>(cct);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">cr_registry</a>) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <a class="code" href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">cr_registry</a>-&gt;<a class="code" href="classRGWCoroutinesManagerRegistry.html#a7a238640a16058287ef91c5788beceaa">add</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  }</div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#aa913373a233aebecc24c3e655aec6daa">  538</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classRGWCoroutinesManager.html#aa913373a233aebecc24c3e655aec6daa">~RGWCoroutinesManager</a>() {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="classRGWCoroutinesManager.html#a5a5299490b5965c91497a8839ead8f33">stop</a>();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="classRGWCoroutinesManager.html#a9e364706fc5260610c3a6bdb474ed20c">completion_mgr</a>-&gt;put();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">cr_registry</a>) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">cr_registry</a>-&gt;<a class="code" href="classRGWCoroutinesManagerRegistry.html#a8747676df56de73a68d07f74a18d9879">remove</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesManager.html#a677f88af42cda165e88ac760c93cd8c6">run</a>(list&lt;RGWCoroutinesStack *&gt;&amp; ops);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRGWCoroutinesManager.html#a677f88af42cda165e88ac760c93cd8c6">run</a>(<a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> *op);</div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#a5a5299490b5965c91497a8839ead8f33">  548</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesManager.html#a5a5299490b5965c91497a8839ead8f33">stop</a>() {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (going_down.inc() == 1) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <a class="code" href="classRGWCoroutinesManager.html#a9e364706fc5260610c3a6bdb474ed20c">completion_mgr</a>-&gt;<a class="code" href="classRGWCompletionManager.html#a567c3bbc385fd621abbe4c1e5599eab0">go_down</a>();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesManager.html#a4c4d775153435fdde9d6605937784347">report_error</a>(<a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *op);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a> *<a class="code" href="classRGWCoroutinesManager.html#ab20e98a670b3a013ccae74ff23a7b43d">create_completion_notifier</a>(<a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *stack);</div>
<div class="line"><a name="l00557"></a><span class="lineno"><a class="line" href="classRGWCoroutinesManager.html#a3da6bc31cf46543055629da287fad002">  557</a></span>&#160;  <a class="code" href="classRGWCompletionManager.html">RGWCompletionManager</a> *<a class="code" href="classRGWCoroutinesManager.html#a3da6bc31cf46543055629da287fad002">get_completion_mgr</a>() { <span class="keywordflow">return</span> <a class="code" href="classRGWCoroutinesManager.html#a9e364706fc5260610c3a6bdb474ed20c">completion_mgr</a>; }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesManager.html#aa9a96092e6525e2583a7f883e01ae5d4">schedule</a>(<a class="code" href="structRGWCoroutinesEnv.html">RGWCoroutinesEnv</a> *env, <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *stack);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a> *<a class="code" href="classRGWCoroutinesManager.html#ae333026a9c9ea674f9654841146b4cf6">allocate_stack</a>();</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">string</span> <a class="code" href="classRGWCoroutinesManager.html#aaab87568344b85d3c605be08e4b2e8f8">get_id</a>();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRGWCoroutinesManager.html#af8f28eaa4e2fde20843d79711422e072">dump</a>(Formatter *f) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;};</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="classRGWSimpleCoroutine.html">  566</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRGWSimpleCoroutine.html">RGWSimpleCoroutine</a> : <span class="keyword">public</span> <a class="code" href="classRGWCoroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordtype">bool</span> called_cleanup;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordtype">int</span> operate();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordtype">int</span> state_init();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordtype">int</span> state_send_request();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordtype">int</span> state_request_complete();</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordtype">int</span> state_all_complete();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordtype">void</span> call_cleanup();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="classRGWSimpleCoroutine.html#aafa54ebcc7726caa1a4ffefd3178a259">  579</a></span>&#160;  <a class="code" href="classRGWSimpleCoroutine.html#aafa54ebcc7726caa1a4ffefd3178a259">RGWSimpleCoroutine</a>(CephContext *_cct) : <a class="code" href="classRGWCoroutine.html">RGWCoroutine</a>(_cct), called_cleanup(false) {}</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classRGWSimpleCoroutine.html#a62b561d8300a2246eb6e87f6e8ce0096">~RGWSimpleCoroutine</a>();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="classRGWSimpleCoroutine.html#ae2fe6dc3dd56fd8065b34f6d5cdfde4c">  582</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classRGWSimpleCoroutine.html#ae2fe6dc3dd56fd8065b34f6d5cdfde4c">init</a>() { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classRGWSimpleCoroutine.html#aee9301e815dbb552d64e931086b1522c">send_request</a>() = 0;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classRGWSimpleCoroutine.html#a9b1e7bad8662502b8e2ba9aae1ff7f0b">request_complete</a>() = 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="classRGWSimpleCoroutine.html#a47c52fd2a943f65bc87f489bf106f481">  585</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classRGWSimpleCoroutine.html#a47c52fd2a943f65bc87f489bf106f481">finish</a>() { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="classRGWSimpleCoroutine.html#ae042a875fdc9eda0d3dd52e2e783a786">  586</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRGWSimpleCoroutine.html#ae042a875fdc9eda0d3dd52e2e783a786">request_cleanup</a>() {}</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;};</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="classRGWCoroutine_html_ab56b9f427d29b1db4b43ccc398ad5e46"><div class="ttname"><a href="classRGWCoroutine.html#ab56b9f427d29b1db4b43ccc398ad5e46">RGWCoroutine::collect_next</a></div><div class="ttdeci">bool collect_next(int *ret, RGWCoroutinesStack **collected_stack=NULL)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:720</div></div>
<div class="ttc" id="classRGWCoroutine_html_a887e803a293aff88fd8d60003a73e50a"><div class="ttname"><a href="classRGWCoroutine.html#a887e803a293aff88fd8d60003a73e50a">RGWCoroutine::cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:202</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a4c4d775153435fdde9d6605937784347"><div class="ttname"><a href="classRGWCoroutinesManager.html#a4c4d775153435fdde9d6605937784347">RGWCoroutinesManager::report_error</a></div><div class="ttdeci">virtual void report_error(RGWCoroutinesStack *op)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:393</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html_a47c52fd2a943f65bc87f489bf106f481"><div class="ttname"><a href="classRGWSimpleCoroutine.html#a47c52fd2a943f65bc87f489bf106f481">RGWSimpleCoroutine::finish</a></div><div class="ttdeci">virtual int finish()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:585</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html"><div class="ttname"><a href="classRGWSimpleCoroutine.html">RGWSimpleCoroutine</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:566</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a8b2ef308a7c14fefa85f7cc36d096ac2"><div class="ttname"><a href="classRGWCoroutinesStack.html#a8b2ef308a7c14fefa85f7cc36d096ac2">RGWCoroutinesStack::set_wait_for_child</a></div><div class="ttdeci">void set_wait_for_child(bool flag)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:455</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a461f809c07927297ec142915e231e83f"><div class="ttname"><a href="classRGWCoroutinesStack.html#a461f809c07927297ec142915e231e83f">RGWCoroutinesStack::parent</a></div><div class="ttdeci">RGWCoroutinesStack * parent</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:371</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a9518084cb4e767e1a14ea154cbcd1d5f"><div class="ttname"><a href="classRGWCoroutinesStack.html#a9518084cb4e767e1a14ea154cbcd1d5f">RGWCoroutinesStack::is_blocked_by_stack</a></div><div class="ttdeci">bool is_blocked_by_stack()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:388</div></div>
<div class="ttc" id="classRGWCoroutine_html_ab6eddf210fee38da950bc8189abe1c75"><div class="ttname"><a href="classRGWCoroutine.html#ab6eddf210fee38da950bc8189abe1c75">RGWCoroutine::reset_description</a></div><div class="ttdeci">void reset_description()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:227</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_aaac10c7f446cc39c9968e93b604baeaf"><div class="ttname"><a href="classRGWCoroutinesStack.html#aaac10c7f446cc39c9968e93b604baeaf">RGWCoroutinesStack::create_completion_notifier</a></div><div class="ttdeci">RGWAioCompletionNotifier * create_completion_notifier()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:369</div></div>
<div class="ttc" id="classRGWConsumerCR_html_a62fd935cc8aa0b7b78a3cf014aae6862"><div class="ttname"><a href="classRGWConsumerCR.html#a62fd935cc8aa0b7b78a3cf014aae6862">RGWConsumerCR::RGWConsumerCR</a></div><div class="ttdeci">RGWConsumerCR(CephContext *_cct)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:314</div></div>
<div class="ttc" id="classRGWCoroutine_html_a1ef9eb58401aeb5626538e29fce21b12"><div class="ttname"><a href="classRGWCoroutine.html#a1ef9eb58401aeb5626538e29fce21b12">RGWCoroutine::spawn</a></div><div class="ttdeci">RGWCoroutinesStack * spawn(RGWCoroutine *op, bool wait)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:710</div></div>
<div class="ttc" id="classRGWConsumerCR_html_af2a8274c488da0fe20220bba013f851c"><div class="ttname"><a href="classRGWConsumerCR.html#af2a8274c488da0fe20220bba013f851c">RGWConsumerCR::consume</a></div><div class="ttdeci">bool consume(T *p)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:326</div></div>
<div class="ttc" id="structRGWCoroutinesEnv_html_a6bfd0e774a21bd39deea625dd95b403d"><div class="ttname"><a href="structRGWCoroutinesEnv.html#a6bfd0e774a21bd39deea625dd95b403d">RGWCoroutinesEnv::RGWCoroutinesEnv</a></div><div class="ttdeci">RGWCoroutinesEnv()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:138</div></div>
<div class="ttc" id="classRGWCoroutine_html_a15bce10b8fbd959412a9473b03f0dd82"><div class="ttname"><a href="classRGWCoroutine.html#a15bce10b8fbd959412a9473b03f0dd82">RGWCoroutine::set_cr_done</a></div><div class="ttdeci">int set_cr_done()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:220</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a434c1dd113cc15842366177327d5ae2f"><div class="ttname"><a href="classRGWCompletionManager.html#a434c1dd113cc15842366177327d5ae2f">RGWCompletionManager::~RGWCompletionManager</a></div><div class="ttdeci">~RGWCompletionManager()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:18</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html_a8747676df56de73a68d07f74a18d9879"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html#a8747676df56de73a68d07f74a18d9879">RGWCoroutinesManagerRegistry::remove</a></div><div class="ttdeci">void remove(RGWCoroutinesManager *mgr)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:653</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a5a5299490b5965c91497a8839ead8f33"><div class="ttname"><a href="classRGWCoroutinesManager.html#a5a5299490b5965c91497a8839ead8f33">RGWCoroutinesManager::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:548</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a5f5f4cdbd776023f66c772334fd134bb"><div class="ttname"><a href="classRGWCoroutinesStack.html#a5f5f4cdbd776023f66c772334fd134bb">RGWCoroutinesStack::get_completion_mgr</a></div><div class="ttdeci">RGWCompletionManager * get_completion_mgr()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:374</div></div>
<div class="ttc" id="classRGWCoroutine_html_a6fbe6e26b4d94762f94914d000623e6e"><div class="ttname"><a href="classRGWCoroutine.html#a6fbe6e26b4d94762f94914d000623e6e">RGWCoroutine::error_stream</a></div><div class="ttdeci">stringstream error_stream</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:210</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_aaab87568344b85d3c605be08e4b2e8f8"><div class="ttname"><a href="classRGWCoroutinesManager.html#aaab87568344b85d3c605be08e4b2e8f8">RGWCoroutinesManager::get_id</a></div><div class="ttdeci">virtual string get_id()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:634</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html_aed2e3d4f28aad2e6df089fcc84ee0af6"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html#aed2e3d4f28aad2e6df089fcc84ee0af6">RGWCoroutinesManagerRegistry::~RGWCoroutinesManagerRegistry</a></div><div class="ttdeci">~RGWCoroutinesManagerRegistry()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:662</div></div>
<div class="ttc" id="rgw__coroutine_8h_html_a0ed1683d636f1aff37722fb792951757"><div class="ttname"><a href="rgw__coroutine_8h.html#a0ed1683d636f1aff37722fb792951757">operator&lt;&lt;</a></div><div class="ttdeci">ostream &amp; operator&lt;&lt;(ostream &amp;out, const RGWCoroutine &amp;cr)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:749</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_ad2c03a7755c8fcfb60e6f28cb0ee5801"><div class="ttname"><a href="classRGWCoroutinesStack.html#ad2c03a7755c8fcfb60e6f28cb0ee5801">RGWCoroutinesStack::set_interval_wait</a></div><div class="ttdeci">void set_interval_wait(bool flag)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:397</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a21eb693c02c12e9699a181be7c083b5a"><div class="ttname"><a href="classRGWCoroutinesStack.html#a21eb693c02c12e9699a181be7c083b5a">RGWCoroutinesStack::wakeup</a></div><div class="ttdeci">void wakeup()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:269</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html_ae042a875fdc9eda0d3dd52e2e783a786"><div class="ttname"><a href="classRGWSimpleCoroutine.html#ae042a875fdc9eda0d3dd52e2e783a786">RGWSimpleCoroutine::request_cleanup</a></div><div class="ttdeci">virtual void request_cleanup()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:586</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_ad53a1f6649145a553136a4b1ea00474f"><div class="ttname"><a href="classRGWCoroutinesStack.html#ad53a1f6649145a553136a4b1ea00474f">RGWCoroutinesStack::set_sleeping</a></div><div class="ttdeci">void set_sleeping(bool flag)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:403</div></div>
<div class="ttc" id="classRGWCoroutine_html_af30a274e4f36b6371b91da8ea873edc5"><div class="ttname"><a href="classRGWCoroutine.html#af30a274e4f36b6371b91da8ea873edc5">RGWCoroutine::to_str</a></div><div class="ttdeci">virtual string to_str() const </div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:744</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a6d4c9bd8b3561a9483937a72d6c9c642"><div class="ttname"><a href="classRGWCoroutinesStack.html#a6d4c9bd8b3561a9483937a72d6c9c642">RGWCoroutinesStack::set_io_blocked</a></div><div class="ttdeci">void set_io_blocked(bool flag)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:391</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_af8f28eaa4e2fde20843d79711422e072"><div class="ttname"><a href="classRGWCoroutinesManager.html#af8f28eaa4e2fde20843d79711422e072">RGWCoroutinesManager::dump</a></div><div class="ttdeci">void dump(Formatter *f) const </div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:613</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a8f6cfcedbf3aaef35abd2c07f06b5c6b"><div class="ttname"><a href="classRGWCoroutinesStack.html#a8f6cfcedbf3aaef35abd2c07f06b5c6b">RGWCoroutinesStack::is_done</a></div><div class="ttdeci">bool is_done()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:382</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_ab20e98a670b3a013ccae74ff23a7b43d"><div class="ttname"><a href="classRGWCoroutinesManager.html#ab20e98a670b3a013ccae74ff23a7b43d">RGWCoroutinesManager::create_completion_notifier</a></div><div class="ttdeci">RGWAioCompletionNotifier * create_completion_notifier(RGWCoroutinesStack *stack)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:606</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a567c3bbc385fd621abbe4c1e5599eab0"><div class="ttname"><a href="classRGWCompletionManager.html#a567c3bbc385fd621abbe4c1e5599eab0">RGWCompletionManager::go_down</a></div><div class="ttdeci">void go_down()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:84</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html_ae2fe6dc3dd56fd8065b34f6d5cdfde4c"><div class="ttname"><a href="classRGWSimpleCoroutine.html#ae2fe6dc3dd56fd8065b34f6d5cdfde4c">RGWSimpleCoroutine::init</a></div><div class="ttdeci">virtual int init()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:582</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a7e3d91470778fd3ba4575845412308be"><div class="ttname"><a href="classRGWCoroutinesStack.html#a7e3d91470778fd3ba4575845412308be">RGWCoroutinesStack::unblock_stack</a></div><div class="ttdeci">bool unblock_stack(RGWCoroutinesStack **s)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:379</div></div>
<div class="ttc" id="classRGWCompletionManager_html_acba6f34f17ec614e1a66c99679fc33ff"><div class="ttname"><a href="classRGWCompletionManager.html#acba6f34f17ec614e1a66c99679fc33ff">RGWCompletionManager::_complete</a></div><div class="ttdeci">void _complete(RGWAioCompletionNotifier *cn, void *user_info)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:49</div></div>
<div class="ttc" id="classRGWAioCompletionNotifier_html"><div class="ttname"><a href="classRGWAioCompletionNotifier.html">RGWAioCompletionNotifier</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:80</div></div>
<div class="ttc" id="classRGWCoroutine_html_ad48b9b53581da917a52d0acdfd264b3a"><div class="ttname"><a href="classRGWCoroutine.html#ad48b9b53581da917a52d0acdfd264b3a">RGWCoroutine::wait_for_child</a></div><div class="ttdeci">void wait_for_child()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:730</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a1b8d4cd2e4230ce25eded5304ea890ed"><div class="ttname"><a href="classRGWCoroutinesStack.html#a1b8d4cd2e4230ce25eded5304ea890ed">RGWCoroutinesStack::spawn</a></div><div class="ttdeci">RGWCoroutinesStack * spawn(RGWCoroutine *source_op, RGWCoroutine *next_op, bool wait)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:231</div></div>
<div class="ttc" id="structrgw__spawned__stacks_html_af154e6f89ba344fa2e10fbb1818a2609"><div class="ttname"><a href="structrgw__spawned__stacks.html#af154e6f89ba344fa2e10fbb1818a2609">rgw_spawned_stacks::add_pending</a></div><div class="ttdeci">void add_pending(RGWCoroutinesStack *s)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:152</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a43023dae081b3939287bf5564f3904dd"><div class="ttname"><a href="classRGWCoroutinesStack.html#a43023dae081b3939287bf5564f3904dd">RGWCoroutinesStack::unwind</a></div><div class="ttdeci">int unwind(int retcode)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:275</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a3094a828a86f995c0b9eca8d4ecfd247"><div class="ttname"><a href="classRGWCoroutinesStack.html#a3094a828a86f995c0b9eca8d4ecfd247">RGWCoroutinesStack::RGWCoroutinesStack</a></div><div class="ttdeci">RGWCoroutinesStack(CephContext *_cct, RGWCoroutinesManager *_ops_mgr, RGWCoroutine *start=NULL)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:158</div></div>
<div class="ttc" id="rgw__coroutine_8h_html_a4124721deb2ba1c3e4d7ccf1c978a05ca46e02efb14837700c9616f415dea2b74"><div class="ttname"><a href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca46e02efb14837700c9616f415dea2b74">RGWCoroutine_Error</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:142</div></div>
<div class="ttc" id="classRGWCoroutine_html_a84b7f58440787faf61271a85bdebd762"><div class="ttname"><a href="classRGWCoroutine.html#a84b7f58440787faf61271a85bdebd762">RGWCoroutine::wakeup</a></div><div class="ttdeci">void wakeup()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:775</div></div>
<div class="ttc" id="classRGWConsumerCR_html_ac676046b1443a24d577e75b7f269ecc0"><div class="ttname"><a href="classRGWConsumerCR.html#ac676046b1443a24d577e75b7f269ecc0">RGWConsumerCR::has_product</a></div><div class="ttdeci">bool has_product()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:316</div></div>
<div class="ttc" id="classRGWAioCompletionNotifier_html_aef3017f3ee006020816918c7e565db55"><div class="ttname"><a href="classRGWAioCompletionNotifier.html#aef3017f3ee006020816918c7e565db55">RGWAioCompletionNotifier::unregister</a></div><div class="ttdeci">void unregister()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:108</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a677f88af42cda165e88ac760c93cd8c6"><div class="ttname"><a href="classRGWCoroutinesManager.html#a677f88af42cda165e88ac760c93cd8c6">RGWCoroutinesManager::run</a></div><div class="ttdeci">int run(list&lt; RGWCoroutinesStack * &gt; &amp;ops)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:440</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a3da6bc31cf46543055629da287fad002"><div class="ttname"><a href="classRGWCoroutinesManager.html#a3da6bc31cf46543055629da287fad002">RGWCoroutinesManager::get_completion_mgr</a></div><div class="ttdeci">RGWCompletionManager * get_completion_mgr()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:557</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html_aee9301e815dbb552d64e931086b1522c"><div class="ttname"><a href="classRGWSimpleCoroutine.html#aee9301e815dbb552d64e931086b1522c">RGWSimpleCoroutine::send_request</a></div><div class="ttdeci">virtual int send_request()=0</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a1bd3482cd6cb6207120457879aedf467"><div class="ttname"><a href="classRGWCoroutinesStack.html#a1bd3482cd6cb6207120457879aedf467">RGWCoroutinesStack::get_env</a></div><div class="ttdeci">RGWCoroutinesEnv * get_env()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:465</div></div>
<div class="ttc" id="classRGWCoroutine_html_a71a3278d2998c966e8a08021ed4a3936"><div class="ttname"><a href="classRGWCoroutine.html#a71a3278d2998c966e8a08021ed4a3936">RGWCoroutine::set_retcode</a></div><div class="ttdeci">void set_retcode(int r)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:258</div></div>
<div class="ttc" id="classRGWCoroutine_html_ae11717a48b06dde1b69a00cfe62a404a"><div class="ttname"><a href="classRGWCoroutine.html#ae11717a48b06dde1b69a00cfe62a404a">RGWCoroutine::num_spawned</a></div><div class="ttdeci">size_t num_spawned()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:276</div></div>
<div class="ttc" id="rgw__coroutine_8h_html_a058c6272d5723f4841023ad537facbc4"><div class="ttname"><a href="rgw__coroutine_8h.html#a058c6272d5723f4841023ad537facbc4">RGW_ASYNC_OPS_MGR_WINDOW</a></div><div class="ttdeci">#define RGW_ASYNC_OPS_MGR_WINDOW</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:24</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html_a62b561d8300a2246eb6e87f6e8ce0096"><div class="ttname"><a href="classRGWSimpleCoroutine.html#a62b561d8300a2246eb6e87f6e8ce0096">RGWSimpleCoroutine::~RGWSimpleCoroutine</a></div><div class="ttdeci">~RGWSimpleCoroutine()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:806</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a855e043e1f828b5c9e3179a813dca47a"><div class="ttname"><a href="classRGWCompletionManager.html#a855e043e1f828b5c9e3179a813dca47a">RGWCompletionManager::try_get_next</a></div><div class="ttdeci">bool try_get_next(void **user_info)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:73</div></div>
<div class="ttc" id="classRGWCompletionManager_html"><div class="ttname"><a href="classRGWCompletionManager.html">RGWCompletionManager</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:30</div></div>
<div class="ttc" id="classRGWCoroutine_html_a58803b75f76ad836937fcdfd833cdc62"><div class="ttname"><a href="classRGWCoroutine.html#a58803b75f76ad836937fcdfd833cdc62">RGWCoroutine::set_status</a></div><div class="ttdeci">stringstream &amp; set_status()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:234</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_adbbf91c80e812d9d420957fcb67093f6"><div class="ttname"><a href="classRGWCoroutinesStack.html#adbbf91c80e812d9d420957fcb67093f6">RGWCoroutinesStack::~RGWCoroutinesStack</a></div><div class="ttdeci">~RGWCoroutinesStack()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:170</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html"><div class="ttname"><a href="classRGWCoroutinesStack.html">RGWCoroutinesStack</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:339</div></div>
<div class="ttc" id="classRGWCoroutine_html_af1d7a6ff09f7d4ad4a09daebdfb364f2"><div class="ttname"><a href="classRGWCoroutine.html#af1d7a6ff09f7d4ad4a09daebdfb364f2">RGWCoroutine::set_state</a></div><div class="ttdeci">int set_state(int s, int ret=0)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:212</div></div>
<div class="ttc" id="classRGWCoroutine_html_a825d8e583ebcaeeb590dcdd160e200cd"><div class="ttname"><a href="classRGWCoroutine.html#a825d8e583ebcaeeb590dcdd160e200cd">RGWCoroutine::io_block</a></div><div class="ttdeci">int io_block(int ret=0)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:132</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a69abd26d5caf6d7272082e03bd60e406"><div class="ttname"><a href="classRGWCoroutinesManager.html#a69abd26d5caf6d7272082e03bd60e406">RGWCoroutinesManager::id</a></div><div class="ttdeci">string id</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:527</div></div>
<div class="ttc" id="structRGWCoroutinesEnv_html_a781a2cc8d3e9e2fd85cf24fc3dae6887"><div class="ttname"><a href="structRGWCoroutinesEnv.html#a781a2cc8d3e9e2fd85cf24fc3dae6887">RGWCoroutinesEnv::scheduled_stacks</a></div><div class="ttdeci">list&lt; RGWCoroutinesStack * &gt; * scheduled_stacks</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:135</div></div>
<div class="ttc" id="classRGWCompletionManager_html_ae560d2a4440d71b535db535bbbdc137b"><div class="ttname"><a href="classRGWCompletionManager.html#ae560d2a4440d71b535db535bbbdc137b">RGWCompletionManager::RGWCompletionManager</a></div><div class="ttdeci">RGWCompletionManager(CephContext *_cct)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:12</div></div>
<div class="ttc" id="structRGWCoroutinesEnv_html_a783f3f3565fc809334c9eb65d7d6319c"><div class="ttname"><a href="structRGWCoroutinesEnv.html#a783f3f3565fc809334c9eb65d7d6319c">RGWCoroutinesEnv::stack</a></div><div class="ttdeci">RGWCoroutinesStack * stack</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:136</div></div>
<div class="ttc" id="classRGWCoroutine_html_a6389d99ed7c42126a5d7713de8cc77cb"><div class="ttname"><a href="classRGWCoroutine.html#a6389d99ed7c42126a5d7713de8cc77cb">RGWCoroutine::set_status</a></div><div class="ttdeci">stringstream &amp; set_status(const string &amp;s)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:238</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_aa4fc840435aed02e3ab5bef6d2fd47cf"><div class="ttname"><a href="classRGWCoroutinesStack.html#aa4fc840435aed02e3ab5bef6d2fd47cf">RGWCoroutinesStack::is_interval_waiting</a></div><div class="ttdeci">bool is_interval_waiting()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:400</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a59000341974b441e5d2bbd0989f5d185"><div class="ttname"><a href="classRGWCompletionManager.html#a59000341974b441e5d2bbd0989f5d185">RGWCompletionManager::unregister_completion_notifier</a></div><div class="ttdeci">void unregister_completion_notifier(RGWAioCompletionNotifier *cn)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:40</div></div>
<div class="ttc" id="classRGWCompletionManager_html_ae9aab4ebe058b165e3c28ed9b02bf8e7"><div class="ttname"><a href="classRGWCompletionManager.html#ae9aab4ebe058b165e3c28ed9b02bf8e7">RGWCompletionManager::get_next</a></div><div class="ttdeci">int get_next(void **user_info)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:59</div></div>
<div class="ttc" id="classRGWCoroutine_html_a1beb8ca86f8399dadec929a74c7d73f5"><div class="ttname"><a href="classRGWCoroutine.html#a1beb8ca86f8399dadec929a74c7d73f5">RGWCoroutine::stack</a></div><div class="ttdeci">RGWCoroutinesStack * stack</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:204</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html_a53ec13d09a26119cafe4060b4703fe7d"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html#a53ec13d09a26119cafe4060b4703fe7d">RGWCoroutinesManagerRegistry::dump</a></div><div class="ttdeci">void dump(Formatter *f) const </div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:697</div></div>
<div class="ttc" id="classRGWCoroutine_html_aca68a280dc4db676ddab29dcab3c795f"><div class="ttname"><a href="classRGWCoroutine.html#aca68a280dc4db676ddab29dcab3c795f">RGWCoroutine::_yield_ret</a></div><div class="ttdeci">bool _yield_ret</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:199</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_aa9a96092e6525e2583a7f883e01ae5d4"><div class="ttname"><a href="classRGWCoroutinesManager.html#aa9a96092e6525e2583a7f883e01ae5d4">RGWCoroutinesManager::schedule</a></div><div class="ttdeci">void schedule(RGWCoroutinesEnv *env, RGWCoroutinesStack *stack)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:432</div></div>
<div class="ttc" id="classRGWCoroutine_html_ae7f14e8deb5ddd43baacfc507dd5105c"><div class="ttname"><a href="classRGWCoroutine.html#ae7f14e8deb5ddd43baacfc507dd5105c">RGWCoroutine::get_ret_status</a></div><div class="ttdeci">int get_ret_status()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:262</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a08e0a83139f78c7b5ec53858726ae646"><div class="ttname"><a href="classRGWCoroutinesManager.html#a08e0a83139f78c7b5ec53858726ae646">RGWCoroutinesManager::ops_window</a></div><div class="ttdeci">int ops_window</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:525</div></div>
<div class="ttc" id="classRGWCoroutine_html_aab2ada61e785db0e4d6f50f56825fdf8"><div class="ttname"><a href="classRGWCoroutine.html#aab2ada61e785db0e4d6f50f56825fdf8">RGWCoroutine::set_sleeping</a></div><div class="ttdeci">void set_sleeping(bool flag)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:128</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a40a608f273bda7721fe582ce5d75a48f"><div class="ttname"><a href="classRGWCoroutinesStack.html#a40a608f273bda7721fe582ce5d75a48f">RGWCoroutinesStack::call</a></div><div class="ttdeci">void call(RGWCoroutine *next_op)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:219</div></div>
<div class="ttc" id="classRGWCoroutine_html_a83c79463d59e40ac18fb8c9ef7225d45"><div class="ttname"><a href="classRGWCoroutine.html#a83c79463d59e40ac18fb8c9ef7225d45">RGWCoroutine::set_io_blocked</a></div><div class="ttdeci">void set_io_blocked(bool flag)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:124</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_af323e3cf0f4f71a249844d5e70e7b207"><div class="ttname"><a href="classRGWCoroutinesStack.html#af323e3cf0f4f71a249844d5e70e7b207">RGWCoroutinesStack::collect_next</a></div><div class="ttdeci">bool collect_next(RGWCoroutine *op, int *ret, RGWCoroutinesStack **collected_stack)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:321</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a84d835d7b3c126047404e2da7e65a4a3"><div class="ttname"><a href="classRGWCoroutinesStack.html#a84d835d7b3c126047404e2da7e65a4a3">RGWCoroutinesStack::collect</a></div><div class="ttdeci">bool collect(RGWCoroutine *op, int *ret)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:295</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a8878b0ba830f2dabd27e425a94d9e062"><div class="ttname"><a href="classRGWCoroutinesStack.html#a8878b0ba830f2dabd27e425a94d9e062">RGWCoroutinesStack::is_io_blocked</a></div><div class="ttdeci">bool is_io_blocked()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:394</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_ae333026a9c9ea674f9654841146b4cf6"><div class="ttname"><a href="classRGWCoroutinesManager.html#ae333026a9c9ea674f9654841146b4cf6">RGWCoroutinesManager::allocate_stack</a></div><div class="ttdeci">RGWCoroutinesStack * allocate_stack()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:630</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a7851d7b5c4800e76fdceaf8c5dd472f5"><div class="ttname"><a href="classRGWCompletionManager.html#a7851d7b5c4800e76fdceaf8c5dd472f5">RGWCompletionManager::WaitContext</a></div><div class="ttdeci">friend class WaitContext</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:54</div></div>
<div class="ttc" id="classRGWCoroutine_html_aa3f6d43393d0f9d900c0f6c98cf5c933"><div class="ttname"><a href="classRGWCoroutine.html#aa3f6d43393d0f9d900c0f6c98cf5c933">RGWCoroutine::log_error</a></div><div class="ttdeci">stringstream &amp; log_error()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:253</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a71808034a6a58e12d161a0613db2c98b"><div class="ttname"><a href="classRGWCoroutinesStack.html#a71808034a6a58e12d161a0613db2c98b">RGWCoroutinesStack::schedule</a></div><div class="ttdeci">void schedule(list&lt; RGWCoroutinesStack * &gt; *stacks=NULL)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:422</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html_ae471074f0dc47343055e16ce8fbd8762"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html#ae471074f0dc47343055e16ce8fbd8762">RGWCoroutinesManagerRegistry::hook_to_admin_command</a></div><div class="ttdeci">int hook_to_admin_command(const string &amp;command)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:670</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html_a9b1e7bad8662502b8e2ba9aae1ff7f0b"><div class="ttname"><a href="classRGWSimpleCoroutine.html#a9b1e7bad8662502b8e2ba9aae1ff7f0b">RGWSimpleCoroutine::request_complete</a></div><div class="ttdeci">virtual int request_complete()=0</div></div>
<div class="ttc" id="classRGWCoroutine_html_afe652dd81659a23225be50fb0a4a7edb"><div class="ttname"><a href="classRGWCoroutine.html#afe652dd81659a23225be50fb0a4a7edb">RGWCoroutine::retcode</a></div><div class="ttdeci">int retcode</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:205</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a0188c3d4cd63305a36ff1f6705d25afc"><div class="ttname"><a href="classRGWCompletionManager.html#a0188c3d4cd63305a36ff1f6705d25afc">RGWCompletionManager::wakeup</a></div><div class="ttdeci">void wakeup(void *opaque)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:102</div></div>
<div class="ttc" id="classRGWAioCompletionNotifier_html_aa5ac53fb2175d0c415f26438cbbf4846"><div class="ttname"><a href="classRGWAioCompletionNotifier.html#aa5ac53fb2175d0c415f26438cbbf4846">RGWAioCompletionNotifier::cb</a></div><div class="ttdeci">void cb()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:116</div></div>
<div class="ttc" id="structRGWCoroutinesEnv_html_affc6c59fd01626fa83b21e2d529008ac"><div class="ttname"><a href="structRGWCoroutinesEnv.html#affc6c59fd01626fa83b21e2d529008ac">RGWCoroutinesEnv::manager</a></div><div class="ttdeci">RGWCoroutinesManager * manager</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:134</div></div>
<div class="ttc" id="structrgw__spawned__stacks_html"><div class="ttname"><a href="structrgw__spawned__stacks.html">rgw_spawned_stacks</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:147</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a335bd803bea2adc6e7afd9526165dffb"><div class="ttname"><a href="classRGWCoroutinesStack.html#a335bd803bea2adc6e7afd9526165dffb">RGWCoroutinesStack::env</a></div><div class="ttdeci">RGWCoroutinesEnv * env</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:370</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html">RGWCoroutinesManagerRegistry</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:489</div></div>
<div class="ttc" id="classRGWConsumerCR_html_ad510c5cfab6a3176b44fa74e218f679d"><div class="ttname"><a href="classRGWConsumerCR.html#ad510c5cfab6a3176b44fa74e218f679d">RGWConsumerCR::wait_for_product</a></div><div class="ttdeci">void wait_for_product()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:320</div></div>
<div class="ttc" id="structRGWCoroutinesEnv_html_a60ca8ad04bb6860500068061d4ed35b1"><div class="ttname"><a href="structRGWCoroutinesEnv.html#a60ca8ad04bb6860500068061d4ed35b1">RGWCoroutinesEnv::run_context</a></div><div class="ttdeci">uint64_t run_context</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:133</div></div>
<div class="ttc" id="classRGWCoroutine_html_a08295386b658198679ac3c52b0f65eb1"><div class="ttname"><a href="classRGWCoroutine.html#a08295386b658198679ac3c52b0f65eb1">RGWCoroutine::set_description</a></div><div class="ttdeci">stringstream &amp; set_description()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:231</div></div>
<div class="ttc" id="structrgw__spawned__stacks_html_a60d3f2642c153f16c426d17a681a01c9"><div class="ttname"><a href="structrgw__spawned__stacks.html#a60d3f2642c153f16c426d17a681a01c9">rgw_spawned_stacks::rgw_spawned_stacks</a></div><div class="ttdeci">rgw_spawned_stacks()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:150</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a67d9f040f385d92212868f8d407f7964"><div class="ttname"><a href="classRGWCoroutinesStack.html#a67d9f040f385d92212868f8d407f7964">RGWCoroutinesStack::operate</a></div><div class="ttdeci">int operate(RGWCoroutinesEnv *env)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:181</div></div>
<div class="ttc" id="structRGWCoroutinesEnv_html"><div class="ttname"><a href="structRGWCoroutinesEnv.html">RGWCoroutinesEnv</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:132</div></div>
<div class="ttc" id="classRGWConsumerCR_html_af1a1c0eef119a4fe2fcbd458e6495ac9"><div class="ttname"><a href="classRGWConsumerCR.html#af1a1c0eef119a4fe2fcbd458e6495ac9">RGWConsumerCR::receive</a></div><div class="ttdeci">void receive(const T &amp;p, bool wakeup=true)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:481</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html"><div class="ttname"><a href="classRGWCoroutinesManager.html">RGWCoroutinesManager</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:511</div></div>
<div class="ttc" id="rgw__coroutine_8h_html_a4124721deb2ba1c3e4d7ccf1c978a05c"><div class="ttname"><a href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05c">RGWCoroutineState</a></div><div class="ttdeci">RGWCoroutineState</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:141</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_aa913373a233aebecc24c3e655aec6daa"><div class="ttname"><a href="classRGWCoroutinesManager.html#aa913373a233aebecc24c3e655aec6daa">RGWCoroutinesManager::~RGWCoroutinesManager</a></div><div class="ttdeci">virtual ~RGWCoroutinesManager()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:538</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_aed576506ac349a8f63d2a5f7eff59f8e"><div class="ttname"><a href="classRGWCoroutinesStack.html#aed576506ac349a8f63d2a5f7eff59f8e">RGWCoroutinesStack::is_blocked</a></div><div class="ttdeci">bool is_blocked()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:417</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a9e364706fc5260610c3a6bdb474ed20c"><div class="ttname"><a href="classRGWCoroutinesManager.html#a9e364706fc5260610c3a6bdb474ed20c">RGWCoroutinesManager::completion_mgr</a></div><div class="ttdeci">RGWCompletionManager * completion_mgr</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:522</div></div>
<div class="ttc" id="classRGWCoroutine_html_a1c141b032b12adc327bbf8405fa19b12"><div class="ttname"><a href="classRGWCoroutine.html#a1c141b032b12adc327bbf8405fa19b12">RGWCoroutine::~RGWCoroutine</a></div><div class="ttdeci">virtual ~RGWCoroutine()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:118</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a5b65a6fd73b4381feb4b1189fe375feb"><div class="ttname"><a href="classRGWCoroutinesManager.html#a5b65a6fd73b4381feb4b1189fe375feb">RGWCoroutinesManager::cr_registry</a></div><div class="ttdeci">RGWCoroutinesManagerRegistry * cr_registry</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:523</div></div>
<div class="ttc" id="classRGWCoroutine_html_a60c1d6187851953e8a5e1dbc97f69bbd"><div class="ttname"><a href="classRGWCoroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">RGWCoroutine::call</a></div><div class="ttdeci">void call(RGWCoroutine *op)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:705</div></div>
<div class="ttc" id="classRGWCoroutine_html_a448c57de2331dfe757400bc0187ee5b5"><div class="ttname"><a href="classRGWCoroutine.html#a448c57de2331dfe757400bc0187ee5b5">RGWCoroutine::is_done</a></div><div class="ttdeci">bool is_done()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:250</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_abb2376246509c51b909b66c00bfba7bd"><div class="ttname"><a href="classRGWCoroutinesStack.html#abb2376246509c51b909b66c00bfba7bd">RGWCoroutinesStack::set_blocked_by</a></div><div class="ttdeci">void set_blocked_by(RGWCoroutinesStack *s)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:450</div></div>
<div class="ttc" id="classRGWAioCompletionNotifier_html_a9de85c4c8653ba710d7b4a4b38ddc410"><div class="ttname"><a href="classRGWAioCompletionNotifier.html#a9de85c4c8653ba710d7b4a4b38ddc410">RGWAioCompletionNotifier::RGWAioCompletionNotifier</a></div><div class="ttdeci">RGWAioCompletionNotifier(RGWCompletionManager *_mgr, void *_user_data)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:364</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html_a7a238640a16058287ef91c5788beceaa"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html#a7a238640a16058287ef91c5788beceaa">RGWCoroutinesManagerRegistry::add</a></div><div class="ttdeci">void add(RGWCoroutinesManager *mgr)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:644</div></div>
<div class="ttc" id="classRGWCompletionManager_html_afc57bd8b515426a44de9cc7ce3109a6d"><div class="ttname"><a href="classRGWCompletionManager.html#afc57bd8b515426a44de9cc7ce3109a6d">RGWCompletionManager::register_completion_notifier</a></div><div class="ttdeci">void register_completion_notifier(RGWAioCompletionNotifier *cn)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:31</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a89e7aefd9d2cc54667d70d739e427681"><div class="ttname"><a href="classRGWCompletionManager.html#a89e7aefd9d2cc54667d70d739e427681">RGWCompletionManager::wait_interval</a></div><div class="ttdeci">void wait_interval(void *opaque, const utime_t &amp;interval, void *user_info)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:94</div></div>
<div class="ttc" id="classRGWAioCompletionNotifier_html_a1a2d61cbb82a744888f021defa9aed23"><div class="ttname"><a href="classRGWAioCompletionNotifier.html#a1a2d61cbb82a744888f021defa9aed23">RGWAioCompletionNotifier::completion</a></div><div class="ttdeci">librados::AioCompletion * completion()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:104</div></div>
<div class="ttc" id="classRGWCompletionManager_html_ad790b8c89d28650509fe620e9e2431a4"><div class="ttname"><a href="classRGWCompletionManager.html#ad790b8c89d28650509fe620e9e2431a4">RGWCompletionManager::complete</a></div><div class="ttdeci">void complete(RGWAioCompletionNotifier *cn, void *user_info)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:25</div></div>
<div class="ttc" id="classRGWCoroutine_html_abd415f885a4f8df3131b17aba1f913df"><div class="ttname"><a href="classRGWCoroutine.html#abd415f885a4f8df3131b17aba1f913df">RGWCoroutine::is_error</a></div><div class="ttdeci">bool is_error()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:251</div></div>
<div class="ttc" id="classRGWAioCompletionNotifier_html_aad441170397f545c9cc28f8e9a9a0ed0"><div class="ttname"><a href="classRGWAioCompletionNotifier.html#aad441170397f545c9cc28f8e9a9a0ed0">RGWAioCompletionNotifier::~RGWAioCompletionNotifier</a></div><div class="ttdeci">~RGWAioCompletionNotifier()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:89</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html_a976530aed79e9b03aeb7cdeddb79aba0"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html#a976530aed79e9b03aeb7cdeddb79aba0">RGWCoroutinesManagerRegistry::call</a></div><div class="ttdeci">bool call(std::string command, cmdmap_t &amp;cmdmap, std::string format, bufferlist &amp;out)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:686</div></div>
<div class="ttc" id="rgw__common_8h_html"><div class="ttname"><a href="rgw__common_8h.html">rgw_common.h</a></div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_aadfafd9d227e33cdf2d197c85a2f54f4"><div class="ttname"><a href="classRGWCoroutinesStack.html#aadfafd9d227e33cdf2d197c85a2f54f4">RGWCoroutinesStack::set_is_scheduled</a></div><div class="ttdeci">void set_is_scheduled(bool flag)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:413</div></div>
<div class="ttc" id="classRGWCoroutine_html"><div class="ttname"><a href="classRGWCoroutine.html">RGWCoroutine</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:167</div></div>
<div class="ttc" id="classRGWCoroutine_html_a2ff2ed16723b2c1ae7b661ad0d68e0e7"><div class="ttname"><a href="classRGWCoroutine.html#a2ff2ed16723b2c1ae7b661ad0d68e0e7">RGWCoroutine::RGWCoroutine</a></div><div class="ttdeci">RGWCoroutine(CephContext *_cct)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:245</div></div>
<div class="ttc" id="classRGWCoroutinesManagerRegistry_html_a159c3d52c1000133df46cb7fbcb1072d"><div class="ttname"><a href="classRGWCoroutinesManagerRegistry.html#a159c3d52c1000133df46cb7fbcb1072d">RGWCoroutinesManagerRegistry::RGWCoroutinesManagerRegistry</a></div><div class="ttdeci">RGWCoroutinesManagerRegistry(CephContext *_cct)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:498</div></div>
<div class="ttc" id="classRGWCoroutine_html_a7c10c5fed7ea19cda4e6a186ff73bb64"><div class="ttname"><a href="classRGWCoroutine.html#a7c10c5fed7ea19cda4e6a186ff73bb64">RGWCoroutine::collect</a></div><div class="ttdeci">bool collect(int *ret)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:715</div></div>
<div class="ttc" id="classRGWCompletionManager_html_a661b4a69c88d785b9297c971f753e09d"><div class="ttname"><a href="classRGWCompletionManager.html#a661b4a69c88d785b9297c971f753e09d">RGWCompletionManager::_wakeup</a></div><div class="ttdeci">void _wakeup(void *opaque)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:108</div></div>
<div class="ttc" id="classRGWCoroutine_html_adf2bb70ac98abcc1b15d1167ddaebb52"><div class="ttname"><a href="classRGWCoroutine.html#adf2bb70ac98abcc1b15d1167ddaebb52">RGWCoroutine::dump</a></div><div class="ttdeci">void dump(Formatter *f) const </div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:780</div></div>
<div class="ttc" id="structrgw__spawned__stacks_html_a1ca98b066c470995db462f9afc8a83ef"><div class="ttname"><a href="structrgw__spawned__stacks.html#a1ca98b066c470995db462f9afc8a83ef">rgw_spawned_stacks::inherit</a></div><div class="ttdeci">void inherit(rgw_spawned_stacks *source)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:156</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a4916534f526fe3558149f08eef7b744f"><div class="ttname"><a href="classRGWCoroutinesStack.html#a4916534f526fe3558149f08eef7b744f">RGWCoroutinesStack::error_str</a></div><div class="ttdeci">string error_str()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:211</div></div>
<div class="ttc" id="rgw__boost__asio__coroutine_8h_html"><div class="ttname"><a href="rgw__boost__asio__coroutine_8h.html">rgw_boost_asio_coroutine.h</a></div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_aa736b8ebc7328026de3af0ac587c52a9"><div class="ttname"><a href="classRGWCoroutinesStack.html#aa736b8ebc7328026de3af0ac587c52a9">RGWCoroutinesStack::is_sleeping</a></div><div class="ttdeci">bool is_sleeping()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:410</div></div>
<div class="ttc" id="classRGWCoroutine_html_a40be538603f51023e908365ea1de154d"><div class="ttname"><a href="classRGWCoroutine.html#a40be538603f51023e908365ea1de154d">RGWCoroutine::wait</a></div><div class="ttdeci">int wait(const utime_t &amp;interval)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:725</div></div>
<div class="ttc" id="classRGWCoroutine_html_ac542bbbaf292dad7e659e0a2dff59465"><div class="ttname"><a href="classRGWCoroutine.html#ac542bbbaf292dad7e659e0a2dff59465">RGWCoroutine::drain_cr</a></div><div class="ttdeci">boost::asio::coroutine drain_cr</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:200</div></div>
<div class="ttc" id="classRGWCoroutine_html_a620d434a11f6184045ad000d33dbd477"><div class="ttname"><a href="classRGWCoroutine.html#a620d434a11f6184045ad000d33dbd477">RGWCoroutine::spawned</a></div><div class="ttdeci">rgw_spawned_stacks spawned</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:208</div></div>
<div class="ttc" id="classRGWCoroutine_html_a68f108b40805707bfd66ef07b0787047"><div class="ttname"><a href="classRGWCoroutine.html#a68f108b40805707bfd66ef07b0787047">RGWCoroutine::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:206</div></div>
<div class="ttc" id="rgw__coroutine_8h_html_a4124721deb2ba1c3e4d7ccf1c978a05ca55132380a33f7059892e175d40bbb528"><div class="ttname"><a href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05ca55132380a33f7059892e175d40bbb528">RGWCoroutine_Done</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:143</div></div>
<div class="ttc" id="rgw__coroutine_8h_html_a4124721deb2ba1c3e4d7ccf1c978a05cad7a3441f1fe26da8bb46bef0757a30ad"><div class="ttname"><a href="rgw__coroutine_8h.html#a4124721deb2ba1c3e4d7ccf1c978a05cad7a3441f1fe26da8bb46bef0757a30ad">RGWCoroutine_Run</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:144</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a09eeaf1bba708bb4c628c28d7c9100ca"><div class="ttname"><a href="classRGWCoroutinesManager.html#a09eeaf1bba708bb4c628c28d7c9100ca">RGWCoroutinesManager::RGWCoroutinesManager</a></div><div class="ttdeci">RGWCoroutinesManager(CephContext *_cct, RGWCoroutinesManagerRegistry *_cr_registry)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:531</div></div>
<div class="ttc" id="classRGWCoroutine_html_a5d54e08eb2f503c19b32bc3797705da0"><div class="ttname"><a href="classRGWCoroutine.html#a5d54e08eb2f503c19b32bc3797705da0">RGWCoroutine::error_str</a></div><div class="ttdeci">string error_str()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:254</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a29976073e4a97a6bef039a63f016fc34"><div class="ttname"><a href="classRGWCoroutinesStack.html#a29976073e4a97a6bef039a63f016fc34">RGWCoroutinesStack::is_error</a></div><div class="ttdeci">bool is_error()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:385</div></div>
<div class="ttc" id="classRGWCoroutine_html_a55b37a2ed8e649ae75457f5e53c565e3"><div class="ttname"><a href="classRGWCoroutine.html#a55b37a2ed8e649ae75457f5e53c565e3">RGWCoroutine::get_stack</a></div><div class="ttdeci">RGWCoroutinesStack * get_stack() const </div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:284</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a9b45e7e27802942992b448a25eb783ce"><div class="ttname"><a href="classRGWCoroutinesStack.html#a9b45e7e27802942992b448a25eb783ce">RGWCoroutinesStack::wait</a></div><div class="ttdeci">int wait(const utime_t &amp;interval)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:260</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a735600b27c725dd3b1b46cb79b308819"><div class="ttname"><a href="classRGWCoroutinesStack.html#a735600b27c725dd3b1b46cb79b308819">RGWCoroutinesStack::waiting_for_child</a></div><div class="ttdeci">bool waiting_for_child()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:459</div></div>
<div class="ttc" id="classRGWCoroutine_html_a576a8ced300f52809ad477f0082e3bcd"><div class="ttname"><a href="classRGWCoroutine.html#a576a8ced300f52809ad477f0082e3bcd">RGWCoroutine::set_cr_error</a></div><div class="ttdeci">int set_cr_error(int ret)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:216</div></div>
<div class="ttc" id="structrgw__spawned__stacks_html_a1d56fb6b9dcf451d760cf044cdf453be"><div class="ttname"><a href="structrgw__spawned__stacks.html#a1d56fb6b9dcf451d760cf044cdf453be">rgw_spawned_stacks::entries</a></div><div class="ttdeci">vector&lt; RGWCoroutinesStack * &gt; entries</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:148</div></div>
<div class="ttc" id="rgw__coroutine_8h_html_a6e9b7fcf87e329632ed41d0765024315"><div class="ttname"><a href="rgw__coroutine_8h.html#a6e9b7fcf87e329632ed41d0765024315">MAX_COROUTINE_HISTORY</a></div><div class="ttdeci">#define MAX_COROUTINE_HISTORY</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:179</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a2b37dcc173fa359303d6d1e1d03cf093"><div class="ttname"><a href="classRGWCoroutinesStack.html#a2b37dcc173fa359303d6d1e1d03cf093">RGWCoroutinesStack::dump</a></div><div class="ttdeci">void dump(Formatter *f) const </div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:405</div></div>
<div class="ttc" id="classRGWSimpleCoroutine_html_aafa54ebcc7726caa1a4ffefd3178a259"><div class="ttname"><a href="classRGWSimpleCoroutine.html#aafa54ebcc7726caa1a4ffefd3178a259">RGWSimpleCoroutine::RGWSimpleCoroutine</a></div><div class="ttdeci">RGWSimpleCoroutine(CephContext *_cct)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:579</div></div>
<div class="ttc" id="classRGWCoroutine_html_ac468bb512c9a403347cd0f2a2edb80ab"><div class="ttname"><a href="classRGWCoroutine.html#ac468bb512c9a403347cd0f2a2edb80ab">RGWCoroutine::operate</a></div><div class="ttdeci">virtual int operate()=0</div></div>
<div class="ttc" id="classRGWConsumerCR_html"><div class="ttname"><a href="classRGWConsumerCR.html">RGWConsumerCR</a></div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:310</div></div>
<div class="ttc" id="classboost_1_1asio_1_1coroutine_html"><div class="ttname"><a href="classboost_1_1asio_1_1coroutine.html">boost::asio::coroutine</a></div><div class="ttdef"><b>Definition:</b> rgw_boost_asio_coroutine.h:23</div></div>
<div class="ttc" id="classRGWCoroutinesStack_html_a7311131421c69db4f7cf4bce6ee3efc9"><div class="ttname"><a href="classRGWCoroutinesStack.html#a7311131421c69db4f7cf4bce6ee3efc9">RGWCoroutinesStack::get_ret_status</a></div><div class="ttdeci">int get_ret_status()</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.h:432</div></div>
<div class="ttc" id="classRGWCoroutine_html_aa503273b557aeefa9bcd9ff915112a4d"><div class="ttname"><a href="classRGWCoroutine.html#aa503273b557aeefa9bcd9ff915112a4d">RGWCoroutine::drain_children</a></div><div class="ttdeci">bool drain_children(int num_cr_left)</div><div class="ttdef"><b>Definition:</b> rgw_coroutine.cc:755</div></div>
<div class="ttc" id="classRGWCoroutinesManager_html_a6b63c2c4559ca88d3de7f6078e1bc4dd"><div class="ttname"><a href="classRGWCoroutinesManager.html#a6b63c2c4559ca88d3de7f6078e1bc4dd">RGWCoroutinesManager::put_completion_notifier</a></div><div class="ttdeci">void put_completion_notifier(RGWAioCompletionNotifier *cn)</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 14 2016 21:41:38 for Ceph RADOS Gateway by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
