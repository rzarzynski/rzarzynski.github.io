<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Ceph RADOS Library: Synchronous I/O</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ceph RADOS Library
   &#160;<span id="projectnumber">60e2bec73ff3970e0c6b44250ce465e6c5dde56f</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Synchronous I/O</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Synchronous I/O:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__librados__h__synch__io.png" border="0" alt="" usemap="#group____librados____h____synch____io"/>
<map name="group____librados____h____synch____io" id="group____librados____h____synch____io">
<area shape="rect" id="node2" href="group__librados__h__xattrs.html" title="Xattrs" alt="" coords="174,5,231,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__librados__h__xattrs"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__xattrs.html">Xattrs</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf03c0d22c25c1473d29bc418a16f2131"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#gaf03c0d22c25c1473d29bc418a16f2131">rados_get_last_version</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io)</td></tr>
<tr class="separator:gaf03c0d22c25c1473d29bc418a16f2131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c14a0314a6bed507dd815183598376b"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga6c14a0314a6bed507dd815183598376b">rados_write</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *oid, const char *buf, size_t len, uint64_t off)</td></tr>
<tr class="separator:ga6c14a0314a6bed507dd815183598376b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8dd9ea7a01a033f6d41ed4af3c801b02"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga8dd9ea7a01a033f6d41ed4af3c801b02">rados_write_full</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *oid, const char *buf, size_t len)</td></tr>
<tr class="separator:ga8dd9ea7a01a033f6d41ed4af3c801b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga074680018d0c0fc2842d65ba0c9b3936"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga074680018d0c0fc2842d65ba0c9b3936">rados_clone_range</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *dst, uint64_t dst_off, const char *src, uint64_t src_off, size_t len)</td></tr>
<tr class="separator:ga074680018d0c0fc2842d65ba0c9b3936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga540fd1ea20ff7c54bab80f240fcc7e4f"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga540fd1ea20ff7c54bab80f240fcc7e4f">rados_append</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *oid, const char *buf, size_t len)</td></tr>
<tr class="separator:ga540fd1ea20ff7c54bab80f240fcc7e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadba16f73ecb0aa12ed9773e2faa2aeef"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#gadba16f73ecb0aa12ed9773e2faa2aeef">rados_read</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *oid, char *buf, size_t len, uint64_t off)</td></tr>
<tr class="separator:gadba16f73ecb0aa12ed9773e2faa2aeef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f798a662c135887fa8d2c615f7ddb24"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga7f798a662c135887fa8d2c615f7ddb24">rados_remove</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *oid)</td></tr>
<tr class="separator:ga7f798a662c135887fa8d2c615f7ddb24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d097d3def2362959a3af634076977ee"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga9d097d3def2362959a3af634076977ee">rados_trunc</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *oid, uint64_t size)</td></tr>
<tr class="separator:ga9d097d3def2362959a3af634076977ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga662629ba980ffffa8a65b17481b435d6"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga662629ba980ffffa8a65b17481b435d6">rados_omap_get_next</a> (<a class="el" href="librados_8h.html#aa90e492075bc31d7037695d79a4bf136">rados_omap_iter_t</a> iter, char **key, char **val, size_t *len)</td></tr>
<tr class="separator:ga662629ba980ffffa8a65b17481b435d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb0a5de9aed41fafb7cd6ded011f97a6"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#gacb0a5de9aed41fafb7cd6ded011f97a6">rados_omap_get_end</a> (<a class="el" href="librados_8h.html#aa90e492075bc31d7037695d79a4bf136">rados_omap_iter_t</a> iter)</td></tr>
<tr class="separator:gacb0a5de9aed41fafb7cd6ded011f97a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7a13f3f1c0b5e0fe2c46d4213ecb4ae"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#gad7a13f3f1c0b5e0fe2c46d4213ecb4ae">rados_stat</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *o, uint64_t *psize, time_t *pmtime)</td></tr>
<tr class="separator:gad7a13f3f1c0b5e0fe2c46d4213ecb4ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2899b207714ad34c2a3339bf2f2d55ca"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga2899b207714ad34c2a3339bf2f2d55ca">rados_tmap_update</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *o, const char *cmdbuf, size_t cmdbuflen)</td></tr>
<tr class="separator:ga2899b207714ad34c2a3339bf2f2d55ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga862cac022c8a12a904f730fa05167e56"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga862cac022c8a12a904f730fa05167e56">rados_tmap_put</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *o, const char *buf, size_t buflen)</td></tr>
<tr class="separator:ga862cac022c8a12a904f730fa05167e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab34aaa6c90333775be0c871f5c3f021d"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#gab34aaa6c90333775be0c871f5c3f021d">rados_tmap_get</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *o, char *buf, size_t buflen)</td></tr>
<tr class="separator:gab34aaa6c90333775be0c871f5c3f021d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53adcdedd6b93cd9bde6c0e97a6b4d79"><td class="memItemLeft" align="right" valign="top">CEPH_RADOS_API int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__librados__h__synch__io.html#ga53adcdedd6b93cd9bde6c0e97a6b4d79">rados_exec</a> (<a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a> io, const char *oid, const char *cls, const char *method, const char *in_buf, size_t in_len, char *buf, size_t out_len)</td></tr>
<tr class="separator:ga53adcdedd6b93cd9bde6c0e97a6b4d79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Writes are replicated to a number of OSDs based on the configuration of the pool they are in. These write functions block until data is in memory on all replicas of the object they're writing to - they are equivalent to doing the corresponding asynchronous write, and the calling rados_ioctx_wait_for_complete(). For greater data safety, use the asynchronous functions and <a class="el" href="group__librados__h__asynch__io.html#gacc3ccc5ff6beaa2cc04d5903a1662b58">rados_aio_wait_for_safe()</a>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga540fd1ea20ff7c54bab80f240fcc7e4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_append </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Append <em>len</em> bytes from <em>buf</em> into the <em>oid</em> object. The value of <em>len</em> must be &lt;= UINT_MAX/2.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the context to operate in </td></tr>
    <tr><td class="paramname">oid</td><td>the name of the object </td></tr>
    <tr><td class="paramname">buf</td><td>the data to append </td></tr>
    <tr><td class="paramname">len</td><td>length of buf (in bytes) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga074680018d0c0fc2842d65ba0c9b3936"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_clone_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>dst_off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>src_off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Efficiently copy a portion of one object to another</p>
<p>If the underlying filesystem on the OSD supports it, this will be a copy-on-write clone.</p>
<p>The src and dest objects must be in the same pg. To ensure this, the io context should have a locator key set (see <a class="el" href="group__librados__h__obj__loc.html#ga2e89c516a1d2d462b3e37f4b71ff8313">rados_ioctx_locator_set_key()</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the context in which the data is cloned </td></tr>
    <tr><td class="paramname">dst</td><td>the name of the destination object </td></tr>
    <tr><td class="paramname">dst_off</td><td>the offset within the destination object (in bytes) </td></tr>
    <tr><td class="paramname">src</td><td>the name of the source object </td></tr>
    <tr><td class="paramname">src_off</td><td>the offset within the source object (in bytes) </td></tr>
    <tr><td class="paramname">len</td><td>how much data to copy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga53adcdedd6b93cd9bde6c0e97a6b4d79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_exec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>in_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>in_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Execute an OSD class method on an object</p>
<p>The OSD has a plugin mechanism for performing complicated operations on an object atomically. These plugins are called classes. This function allows librados users to call the custom methods. The input and output formats are defined by the class. Classes in ceph.git can be found in src/cls subdirectories</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the context in which to call the method </td></tr>
    <tr><td class="paramname">oid</td><td>the object to call the method on </td></tr>
    <tr><td class="paramname">cls</td><td>the name of the class </td></tr>
    <tr><td class="paramname">method</td><td>the name of the method </td></tr>
    <tr><td class="paramname">in_buf</td><td>where to find input </td></tr>
    <tr><td class="paramname">in_len</td><td>length of in_buf in bytes </td></tr>
    <tr><td class="paramname">buf</td><td>where to store output </td></tr>
    <tr><td class="paramname">out_len</td><td>length of buf in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the length of the output, or -ERANGE if out_buf does not have enough space to store it (For methods that return data). For methods that don't return data, the return value is method-specific. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf03c0d22c25c1473d29bc418a16f2131"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API uint64_t rados_get_last_version </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the version of the last object read or written to.</p>
<p>This exposes the internal version number of the last object read or written via this io context</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the io context to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>last read or written object version </dd></dl>

</div>
</div>
<a class="anchor" id="gacb0a5de9aed41fafb7cd6ded011f97a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API void rados_omap_get_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa90e492075bc31d7037695d79a4bf136">rados_omap_iter_t</a>&#160;</td>
          <td class="paramname"><em>iter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the omap iterator.</p>
<p>iter should not be used after this is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>the iterator to close </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga662629ba980ffffa8a65b17481b435d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_omap_get_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa90e492075bc31d7037695d79a4bf136">rados_omap_iter_t</a>&#160;</td>
          <td class="paramname"><em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the next omap key/value pair on the object</p>
<dl class="section pre"><dt>Precondition</dt><dd>iter is a valid iterator</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>key and val are the next key/value pair. key is null-terminated, and val has length len. If the end of the list has been reached, key and val are NULL, and len is 0. key and val will not be accessible after <a class="el" href="group__librados__h__synch__io.html#gacb0a5de9aed41fafb7cd6ded011f97a6">rados_omap_get_end()</a> is called on iter, so if they are needed after that they should be copied.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>iterator to advance </td></tr>
    <tr><td class="paramname">key</td><td>where to store the key of the next omap entry </td></tr>
    <tr><td class="paramname">val</td><td>where to store the value of the next omap entry </td></tr>
    <tr><td class="paramname">len</td><td>where to store the number of bytes in val </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="gadba16f73ecb0aa12ed9773e2faa2aeef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read data from an object</p>
<p>The io context determines the snapshot to read from, if any was set by <a class="el" href="group__librados__h__snaps.html#gac0952bef2b12373b2cb7c86d59131fc9">rados_ioctx_snap_set_read()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the context in which to perform the read </td></tr>
    <tr><td class="paramname">oid</td><td>the name of the object to read from </td></tr>
    <tr><td class="paramname">buf</td><td>where to store the results </td></tr>
    <tr><td class="paramname">len</td><td>the number of bytes to read </td></tr>
    <tr><td class="paramname">off</td><td>the offset to start reading from in the object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes read on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga7f798a662c135887fa8d2c615f7ddb24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete an object</p>
<dl class="section note"><dt>Note</dt><dd>This does not delete any snapshots of the object.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the pool to delete the object from </td></tr>
    <tr><td class="paramname">oid</td><td>the name of the object to delete </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="gad7a13f3f1c0b5e0fe2c46d4213ecb4ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_stat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>psize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&#160;</td>
          <td class="paramname"><em>pmtime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get object stats (size/mtime)</p>
<p>TODO: when are these set, and by whom? can they be out of date?</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>ioctx </td></tr>
    <tr><td class="paramname">o</td><td>object name </td></tr>
    <tr><td class="paramname">psize</td><td>where to store object size </td></tr>
    <tr><td class="paramname">pmtime</td><td>where to store modification time </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="gab34aaa6c90333775be0c871f5c3f021d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_tmap_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fetch complete tmap (trivial map) object</p>
<p>Read a full tmap object. See <a class="el" href="group__librados__h__synch__io.html#ga862cac022c8a12a904f730fa05167e56">rados_tmap_put()</a> for the format the data is returned in.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>ioctx </td></tr>
    <tr><td class="paramname">o</td><td>object name </td></tr>
    <tr><td class="paramname">buf</td><td>buffer </td></tr>
    <tr><td class="paramname">buflen</td><td>buffer length in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd>
<dd>
-ERANGE if buf isn't big enough </dd></dl>

</div>
</div>
<a class="anchor" id="ga862cac022c8a12a904f730fa05167e56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_tmap_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Store complete tmap (trivial map) object</p>
<p>Put a full tmap object into the store, replacing what was there.</p>
<p>The format of buf is:</p>
<ul>
<li>4 bytes - length of header (little endian)</li>
<li>N bytes - header data</li>
<li>4 bytes - number of keys (little endian)</li>
</ul>
<p>and for each key,</p>
<ul>
<li>4 bytes - key name length (little endian)</li>
<li>N bytes - key name</li>
<li>4 bytes - value length (little endian)</li>
<li>M bytes - value data</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>ioctx </td></tr>
    <tr><td class="paramname">o</td><td>object name </td></tr>
    <tr><td class="paramname">buf</td><td>buffer </td></tr>
    <tr><td class="paramname">buflen</td><td>buffer length in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga2899b207714ad34c2a3339bf2f2d55ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_tmap_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmdbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cmdbuflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update tmap (trivial map)</p>
<p>Do compound update to a tmap object, inserting or deleting some number of records. cmdbuf is a series of operation byte codes, following by command payload. Each command is a single-byte command code, whose value is one of CEPH_OSD_TMAP_*.</p>
<ul>
<li>update tmap 'header'<ul>
<li>1 byte = CEPH_OSD_TMAP_HDR</li>
<li>4 bytes = data length (little endian)</li>
<li>N bytes = data</li>
</ul>
</li>
<li>insert/update one key/value pair<ul>
<li>1 byte = CEPH_OSD_TMAP_SET</li>
<li>4 bytes = key name length (little endian)</li>
<li>N bytes = key name</li>
<li>4 bytes = data length (little endian)</li>
<li>M bytes = data</li>
</ul>
</li>
<li>insert one key/value pair; return -EEXIST if it already exists.<ul>
<li>1 byte = CEPH_OSD_TMAP_CREATE</li>
<li>4 bytes = key name length (little endian)</li>
<li>N bytes = key name</li>
<li>4 bytes = data length (little endian)</li>
<li>M bytes = data</li>
</ul>
</li>
<li>remove one key/value pair<ul>
<li>1 byte = CEPH_OSD_TMAP_RM</li>
<li>4 bytes = key name length (little endian)</li>
<li>N bytes = key name</li>
</ul>
</li>
</ul>
<p>Restrictions:</p>
<ul>
<li>The HDR update must preceed any key/value updates.</li>
<li>All key/value updates must be in lexicographically sorted order in cmdbuf.</li>
<li>You can read/write to a tmap object via the regular APIs, but you should be careful not to corrupt it. Also be aware that the object format may change without notice.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>ioctx </td></tr>
    <tr><td class="paramname">o</td><td>object name </td></tr>
    <tr><td class="paramname">cmdbuf</td><td>command buffer </td></tr>
    <tr><td class="paramname">cmdbuflen</td><td>command buffer length in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga9d097d3def2362959a3af634076977ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_trunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resize an object</p>
<p>If this enlarges the object, the new area is logically filled with zeroes. If this shrinks the object, the excess data is removed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the context in which to truncate </td></tr>
    <tr><td class="paramname">oid</td><td>the name of the object </td></tr>
    <tr><td class="paramname">size</td><td>the new size of the object in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga6c14a0314a6bed507dd815183598376b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write <em>len</em> bytes from <em>buf</em> into the <em>oid</em> object, starting at offset <em>off</em>. The value of <em>len</em> must be &lt;= UINT_MAX/2.</p>
<dl class="section note"><dt>Note</dt><dd>This will never return a positive value not equal to len. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the io context in which the write will occur </td></tr>
    <tr><td class="paramname">oid</td><td>name of the object </td></tr>
    <tr><td class="paramname">buf</td><td>data to write </td></tr>
    <tr><td class="paramname">len</td><td>length of the data, in bytes </td></tr>
    <tr><td class="paramname">off</td><td>byte offset in the object to begin writing at </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga8dd9ea7a01a033f6d41ed4af3c801b02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEPH_RADOS_API int rados_write_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="librados_8h.html#aa892568c6a8b4f1c07785b228014e3e3">rados_ioctx_t</a>&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write <em>len</em> bytes from <em>buf</em> into the <em>oid</em> object. The value of <em>len</em> must be &lt;= UINT_MAX/2.</p>
<p>The object is filled with the provided data. If the object exists, it is atomically truncated and then written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>the io context in which the write will occur </td></tr>
    <tr><td class="paramname">oid</td><td>name of the object </td></tr>
    <tr><td class="paramname">buf</td><td>data to write </td></tr>
    <tr><td class="paramname">len</td><td>length of the data, in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 5 2015 14:26:23 for Ceph RADOS Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
